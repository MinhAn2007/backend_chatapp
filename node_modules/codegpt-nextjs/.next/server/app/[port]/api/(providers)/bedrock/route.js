"use strict";(()=>{var e={};e.id=5064,e.ids=[5064],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},73292:e=>{e.exports=require("fs/promises")},13685:e=>{e.exports=require("http")},85158:e=>{e.exports=require("http2")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},77282:e=>{e.exports=require("process")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},76224:e=>{e.exports=require("tty")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},88081:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>tF,patchFetch:()=>tH,requestAsyncStorage:()=>tM,routeModule:()=>tD,serverHooks:()=>tL,staticGenerationAsyncStorage:()=>tq});var n,i,o={};r.r(o),r.d(o,{HEAD:()=>tN,POST:()=>tj});var a=r(49303),s=r(88716),l=r(60670),c=r(20021),u=r(56342),d=r(76129),f=r(51414),p=r(87320),h=r(94750),y=r(73626),g=r(24046),m=r(58158),w=r(84119),b=r(16596),v=r(83311),S=r(71424);let E=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)});var A=r(64339),x=r(75893),T=r(59179),k=r(39539),$=r(73797),R=r(39701);let C=async(e,t,r)=>({operation:(0,R.J)(t).operation,region:await (0,R.$)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),P=e=>{let t=[];return e.operation,t.push({schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}),t},O=e=>({...(0,$.K)(e)}),I=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"bedrock"}),_={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},U={i8:"3.556.0"};var N=r(29648),j=r(45495),D=r(80442),M=r(99216),q=r(73382);class L{constructor(e){if(this.bytes=e,8!==e.byteLength)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x7fffffffffffffff||e<-0x8000000000000000)throw Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let t=new Uint8Array(8);for(let r=7,n=Math.abs(Math.round(e));r>-1&&n>0;r--,n/=256)t[r]=n;return e<0&&F(t),new L(t)}valueOf(){let e=this.bytes.slice(0),t=128&e[0];return t&&F(e),parseInt((0,q.N)(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function F(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}class H{constructor(e,t){this.toUtf8=e,this.fromUtf8=t}format(e){let t=[];for(let r of Object.keys(e)){let n=this.fromUtf8(r);t.push(Uint8Array.from([n.byteLength]),n,this.formatHeaderValue(e[r]))}let r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0)),n=0;for(let e of t)r.set(e,n),n+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":let a=this.fromUtf8(e.value),s=new DataView(new ArrayBuffer(3+a.byteLength));s.setUint8(0,7),s.setUint16(1,a.byteLength,!1);let l=new Uint8Array(s.buffer);return l.set(a,3),l;case"timestamp":let c=new Uint8Array(9);return c[0]=8,c.set(L.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!X.test(e.value))throw Error(`Invalid UUID received: ${e.value}`);let u=new Uint8Array(17);return u[0]=9,u.set((0,q.H)(e.value.replace(/\-/g,"")),1),u}}parse(e){let t={},r=0;for(;r<e.byteLength;){let n=e.getUint8(r++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,n));switch(r+=n,e.getUint8(r++)){case 0:t[i]={type:B,value:!0};break;case 1:t[i]={type:B,value:!1};break;case 2:t[i]={type:z,value:e.getInt8(r++)};break;case 3:t[i]={type:W,value:e.getInt16(r,!1)},r+=2;break;case 4:t[i]={type:V,value:e.getInt32(r,!1)},r+=4;break;case 5:t[i]={type:G,value:new L(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:let o=e.getUint16(r,!1);r+=2,t[i]={type:K,value:new Uint8Array(e.buffer,e.byteOffset+r,o)},r+=o;break;case 7:let a=e.getUint16(r,!1);r+=2,t[i]={type:Z,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,a))},r+=a;break;case 8:t[i]={type:J,value:new Date(new L(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:let s=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,t[i]={type:Y,value:`${(0,q.N)(s.subarray(0,4))}-${(0,q.N)(s.subarray(4,6))}-${(0,q.N)(s.subarray(6,8))}-${(0,q.N)(s.subarray(8,10))}-${(0,q.N)(s.subarray(10))}`};break;default:throw Error("Unrecognized header type tag")}}return t}}!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(n||(n={}));let B="boolean",z="byte",W="short",V="integer",G="long",K="binary",Z="string",J="timestamp",Y="uuid",X=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class Q{constructor(e,t){this.headerMarshaller=new H(e,t),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){let e=this.messageBuffer.pop(),t=this.isEndOfStream;return{getMessage:()=>e,isEndOfStream:()=>t}}getAvailableMessages(){let e=this.messageBuffer;this.messageBuffer=[];let t=this.isEndOfStream;return{getMessages:()=>e,isEndOfStream:()=>t}}encode({headers:e,body:t}){let r=this.headerMarshaller.format(e),n=r.byteLength+t.byteLength+16,i=new Uint8Array(n),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new M.Crc32;return o.setUint32(0,n,!1),o.setUint32(4,r.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(r,12),i.set(t,r.byteLength+12),o.setUint32(n-4,a.update(i.subarray(8,n-4)).digest(),!1),i}decode(e){let{headers:t,body:r}=function({byteLength:e,byteOffset:t,buffer:r}){if(e<16)throw Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),i=n.getUint32(0,!1);if(e!==i)throw Error("Reported message length does not match received message length");let o=n.getUint32(4,!1),a=n.getUint32(8,!1),s=n.getUint32(e-4,!1),l=new M.Crc32().update(new Uint8Array(r,t,8));if(a!==l.digest())throw Error(`The prelude checksum specified in the message (${a}) does not match the calculated CRC32 checksum (${l.digest()})`);if(l.update(new Uint8Array(r,t+8,e-12)),s!==l.digest())throw Error(`The message checksum (${l.digest()}) did not match the expected value of ${s}`);return{headers:new DataView(r,t+8+4,o),body:new Uint8Array(r,t+8+4+o,i-o-16)}}(e);return{headers:this.headerMarshaller.parse(t),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}}class ee{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let e of this.options.inputStream){let t=this.options.decoder.decode(e);yield t}}}class et{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let e of this.options.messageStream){let t=this.options.encoder.encode(e);yield t}this.options.includeEndFrame&&(yield new Uint8Array(0))}}class er{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let e of this.options.messageStream){let t=await this.options.deserializer(e);void 0!==t&&(yield t)}}}class en{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let e of this.options.inputStream){let t=this.options.serializer(e);yield t}}}class ei{constructor({utf8Encoder:e,utf8Decoder:t}){this.eventStreamCodec=new Q(e,t),this.utfEncoder=e}deserialize(e,t){var r;return new er({messageStream:new ee({inputStream:function(e){let t=0,r=0,n=null,i=null,o=e=>{if("number"!=typeof e)throw Error("Attempted to allocate an event message where size was not a number: "+e);t=e,r=4,new DataView((n=new Uint8Array(e)).buffer).setUint32(0,e,!1)};return{[Symbol.asyncIterator]:async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:e,done:s}=await a.next();if(s){if(t){if(t===r)yield n;else throw Error("Truncated event message received.")}return}let l=e.length,c=0;for(;c<l;){if(!n){let t=l-c;i||(i=new Uint8Array(4));let n=Math.min(4-r,t);if(i.set(e.slice(c,c+n),r),r+=n,c+=n,r<4)break;o(new DataView(i.buffer).getUint32(0,!1)),i=null}let a=Math.min(t-r,l-c);n.set(e.slice(c,c+a),r),r+=a,c+=a,t&&t===r&&(yield n,n=null,t=0,r=0)}}}}}(e),decoder:this.eventStreamCodec}),deserializer:(r=this.utfEncoder,async function(e){let{value:n}=e.headers[":message-type"];if("error"===n){let t=Error(e.headers[":error-message"].value||"UnknownError");throw t.name=e.headers[":error-code"].value,t}if("exception"===n){let n=e.headers[":exception-type"].value,i=await t({[n]:e});if(i.$unknown){let t=Error(r(e.body));throw t.name=n,t}throw i[n]}if("event"===n){let r={[e.headers[":event-type"].value]:e},n=await t(r);if(n.$unknown)return;return n}throw Error(`Unrecognizable event type: ${e.headers[":event-type"].value}`)})})}serialize(e,t){return new et({messageStream:new en({inputStream:e,serializer:t}),encoder:this.eventStreamCodec,includeEndFrame:!0})}}var eo=r(12781);async function*ea(e){let t=!1,r=!1,n=[];for(e.on("error",e=>{if(t||(t=!0),e)throw e}),e.on("data",e=>{n.push(e)}),e.on("end",()=>{t=!0});!r;){let e=await new Promise(e=>setTimeout(()=>e(n.shift()),0));e&&(yield e),r=t&&0===n.length}}class es{constructor({utf8Encoder:e,utf8Decoder:t}){this.universalMarshaller=new ei({utf8Decoder:t,utf8Encoder:e})}deserialize(e,t){let r="function"==typeof e[Symbol.asyncIterator]?e:ea(e);return this.universalMarshaller.deserialize(r,t)}serialize(e,t){return eo.Readable.from(this.universalMarshaller.serialize(e,t))}}let el=e=>new es(e);var ec=r(40804),eu=r(1071),ed=r(60660),ef=r(72282),ep=r(96602),eh=r(90386),ey=r(96636),eg=r(55898),em=r(13571),ew=r(95592),eb=r(46293);let ev="required",eS="argv",eE="isSet",eA="booleanEquals",ex="error",eT="endpoint",ek="tree",e$="PartitionResult",eR={[ev]:!1,type:"String"},eC={[ev]:!0,default:!1,type:"Boolean"},eP={ref:"Endpoint"},eO={fn:eA,[eS]:[{ref:"UseFIPS"},!0]},eI={fn:eA,[eS]:[{ref:"UseDualStack"},!0]},e_={},eU={fn:"getAttr",[eS]:[{ref:e$},"supportsFIPS"]},eN={fn:eA,[eS]:[!0,{fn:"getAttr",[eS]:[{ref:e$},"supportsDualStack"]}]},ej=[eO],eD=[eI],eM=[{ref:"Region"}],eq={version:"1.0",parameters:{Region:eR,UseDualStack:eC,UseFIPS:eC,Endpoint:eR},rules:[{conditions:[{fn:eE,[eS]:[eP]}],rules:[{conditions:ej,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ex},{rules:[{conditions:eD,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ex},{endpoint:{url:eP,properties:e_,headers:e_},type:eT}],type:ek}],type:ek},{rules:[{conditions:[{fn:eE,[eS]:eM}],rules:[{conditions:[{fn:"aws.partition",[eS]:eM,assign:e$}],rules:[{conditions:[eO,eI],rules:[{conditions:[{fn:eA,[eS]:[!0,eU]},eN],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:e_,headers:e_},type:eT}],type:ek}],type:ek},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ex}],type:ek},{conditions:ej,rules:[{conditions:[{fn:eA,[eS]:[eU,!0]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:e_,headers:e_},type:eT}],type:ek}],type:ek},{error:"FIPS is enabled but this partition does not support FIPS",type:ex}],type:ek},{conditions:eD,rules:[{conditions:[eN],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:e_,headers:e_},type:eT}],type:ek}],type:ek},{error:"DualStack is enabled but this partition does not support DualStack",type:ex}],type:ek},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:e_,headers:e_},type:eT}],type:ek}],type:ek}],type:ek},{error:"Invalid Configuration: Missing Region",type:ex}],type:ek}]},eL=(e,t={})=>(0,eb.B1)(eq,{endpointParams:e,logger:t.logger});eb.DY.aws=ew.Iu;let eF=e=>({apiVersion:"2023-09-30",base64Decoder:e?.base64Decoder??eg.G,base64Encoder:e?.base64Encoder??eg.s,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??eL,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??P,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new eh.V}],logger:e?.logger??new k.vk,serviceId:e?.serviceId??"Bedrock Runtime",urlParser:e?.urlParser??ey.e,utf8Decoder:e?.utf8Decoder??em.$x,utf8Encoder:e?.utf8Encoder??em.GZ});var eH=r(46608);let eB=e=>{(0,k.H_)(process.version);let t=(0,eH.j)(e),r=()=>t().then(k.jv),n=eF(e);return(0,N.H)(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??ef.W,credentialDefaultProvider:e?.credentialDefaultProvider??j.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,D.fV)({serviceId:n.serviceId,clientVersion:U.i8}),eventStreamSerdeProvider:e?.eventStreamSerdeProvider??el,maxAttempts:e?.maxAttempts??(0,eu.M)(T.Hs),region:e?.region??(0,eu.M)(v._c,v.zb),requestHandler:ed.NA.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,eu.M)({...T.aK,default:async()=>(await r()).retryMode||ep.CA}),sha256:e?.sha256??ec.k.bind(null,"sha256"),streamCollector:e?.streamCollector??ed.CF,useDualstackEndpoint:e?.useDualstackEndpoint??(0,eu.M)(v.G7),useFipsEndpoint:e?.useFipsEndpoint??(0,eu.M)(v.NL)}};var ez=r(35903),eW=r(41966);let eV=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(e){let r=t.findIndex(t=>t.schemeId===e.schemeId);-1===r?t.push(e):t.splice(r,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){r=e},httpAuthSchemeProvider:()=>r,setCredentials(e){n=e},credentials:()=>n}},eG=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),eK=e=>e,eZ=(e,t)=>{let r={...eK((0,ez.GW)(e)),...eK((0,k.kE)(e)),...eK((0,eW.cA)(e)),...eK(eV(e))};return t.forEach(e=>e.configure(r)),{...e,...(0,ez.A1)(r),...(0,k.SQ)(r),...(0,eW.AO)(r),...eG(r)}};class eJ extends k.KU{constructor(...[e]){let t=I(eB(e||{})),r=(0,v.Xb)(t),n=(0,x.uW)(r),i=(0,T.BC)(n),o=(0,g.S8)(i),a=eZ(O(E((0,b.er)(o))),e?.extensions||[]);super(a),this.config=a,this.middlewareStack.use((0,T.NQ)(this.config)),this.middlewareStack.use((0,A.VG)(this.config)),this.middlewareStack.use((0,g.G2)(this.config)),this.middlewareStack.use((0,m.cV)(this.config)),this.middlewareStack.use((0,w.eV)(this.config)),this.middlewareStack.use((0,b.XJ)(this.config)),this.middlewareStack.use((0,S.tZ)(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use((0,S.aZ)(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return C}getIdentityProviderConfigProvider(){return async e=>new S.K5({"aws.auth#sigv4":e.credentials})}}var eY=r(48787);class eX extends k.sI{constructor(e){super(e),Object.setPrototypeOf(this,eX.prototype)}}class eQ extends eX{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,eQ.prototype)}}class e0 extends eX{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,e0.prototype)}}class e1 extends eX{constructor(e){super({name:"ModelErrorException",$fault:"client",...e}),this.name="ModelErrorException",this.$fault="client",Object.setPrototypeOf(this,e1.prototype),this.originalStatusCode=e.originalStatusCode,this.resourceName=e.resourceName}}class e2 extends eX{constructor(e){super({name:"ModelNotReadyException",$fault:"client",...e}),this.name="ModelNotReadyException",this.$fault="client",Object.setPrototypeOf(this,e2.prototype)}}class e3 extends eX{constructor(e){super({name:"ModelTimeoutException",$fault:"client",...e}),this.name="ModelTimeoutException",this.$fault="client",Object.setPrototypeOf(this,e3.prototype)}}class e6 extends eX{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e6.prototype)}}class e8 extends eX{constructor(e){super({name:"ServiceQuotaExceededException",$fault:"client",...e}),this.name="ServiceQuotaExceededException",this.$fault="client",Object.setPrototypeOf(this,e8.prototype)}}class e4 extends eX{constructor(e){super({name:"ThrottlingException",$fault:"client",...e}),this.name="ThrottlingException",this.$fault="client",Object.setPrototypeOf(this,e4.prototype)}}class e5 extends eX{constructor(e){super({name:"ValidationException",$fault:"client",...e}),this.name="ValidationException",this.$fault="client",Object.setPrototypeOf(this,e5.prototype)}}class e9 extends eX{constructor(e){super({name:"ModelStreamErrorException",$fault:"client",...e}),this.name="ModelStreamErrorException",this.$fault="client",Object.setPrototypeOf(this,e9.prototype),this.originalStatusCode=e.originalStatusCode,this.originalMessage=e.originalMessage}}(i||(i={})).visit=(e,t)=>void 0!==e.chunk?t.chunk(e.chunk):void 0!==e.internalServerException?t.internalServerException(e.internalServerException):void 0!==e.modelStreamErrorException?t.modelStreamErrorException(e.modelStreamErrorException):void 0!==e.validationException?t.validationException(e.validationException):void 0!==e.throttlingException?t.throttlingException(e.throttlingException):void 0!==e.modelTimeoutException?t.modelTimeoutException(e.modelTimeoutException):t._(e.$unknown[0],e.$unknown[1]);let e7=e=>({...e,...e.body&&{body:k.oc}}),te=e=>({...e,...e.body&&{body:"STREAMING_CONTENT"}});var tt=r(64628);let tr=async(e,t)=>{let r;let n=(0,S.cu)(e,t),i=(0,k.UI)({},tT,{[tR]:e[t$]||"application/octet-stream",[tC]:e[tk]});return n.bp("/model/{modelId}/invoke-with-response-stream"),n.p("modelId",()=>e.modelId,"{modelId}",!1),void 0!==e.body&&(r=e.body),n.m("POST").h(i).b(r),n.build()},tn=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return ti(e,t);let r=(0,k.UI)({$metadata:tx(e),[t$]:[,e.headers[tP]]}),n=e.body;return r.body=tg(n,t),r},ti=async(e,t)=>{let r={...e,body:await (0,tt.fk)(e.body,t)},n=(0,tt.mJ)(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.bedrockruntime#AccessDeniedException":throw await ta(r,t);case"InternalServerException":case"com.amazonaws.bedrockruntime#InternalServerException":throw await ts(r,t);case"ModelErrorException":case"com.amazonaws.bedrockruntime#ModelErrorException":throw await tl(r,t);case"ModelNotReadyException":case"com.amazonaws.bedrockruntime#ModelNotReadyException":throw await tc(r,t);case"ModelTimeoutException":case"com.amazonaws.bedrockruntime#ModelTimeoutException":throw await td(r,t);case"ResourceNotFoundException":case"com.amazonaws.bedrockruntime#ResourceNotFoundException":throw await tf(r,t);case"ServiceQuotaExceededException":case"com.amazonaws.bedrockruntime#ServiceQuotaExceededException":throw await tp(r,t);case"ThrottlingException":case"com.amazonaws.bedrockruntime#ThrottlingException":throw await th(r,t);case"ValidationException":case"com.amazonaws.bedrockruntime#ValidationException":throw await ty(r,t);case"ModelStreamErrorException":case"com.amazonaws.bedrockruntime#ModelStreamErrorException":throw await tu(r,t);default:return to({output:e,parsedBody:r.body,errorCode:n})}},to=(0,k.PC)(eX),ta=async(e,t)=>{let r=(0,k.UI)({}),n=e.body;Object.assign(r,(0,k.qn)(n,{message:k.pY}));let i=new eQ({$metadata:tx(e),...r});return(0,k.to)(i,e.body)},ts=async(e,t)=>{let r=(0,k.UI)({}),n=e.body;Object.assign(r,(0,k.qn)(n,{message:k.pY}));let i=new e0({$metadata:tx(e),...r});return(0,k.to)(i,e.body)},tl=async(e,t)=>{let r=(0,k.UI)({}),n=e.body;Object.assign(r,(0,k.qn)(n,{message:k.pY,originalStatusCode:k.u$,resourceName:k.pY}));let i=new e1({$metadata:tx(e),...r});return(0,k.to)(i,e.body)},tc=async(e,t)=>{let r=(0,k.UI)({}),n=e.body;Object.assign(r,(0,k.qn)(n,{message:k.pY}));let i=new e2({$metadata:tx(e),...r});return(0,k.to)(i,e.body)},tu=async(e,t)=>{let r=(0,k.UI)({}),n=e.body;Object.assign(r,(0,k.qn)(n,{message:k.pY,originalMessage:k.pY,originalStatusCode:k.u$}));let i=new e9({$metadata:tx(e),...r});return(0,k.to)(i,e.body)},td=async(e,t)=>{let r=(0,k.UI)({}),n=e.body;Object.assign(r,(0,k.qn)(n,{message:k.pY}));let i=new e3({$metadata:tx(e),...r});return(0,k.to)(i,e.body)},tf=async(e,t)=>{let r=(0,k.UI)({}),n=e.body;Object.assign(r,(0,k.qn)(n,{message:k.pY}));let i=new e6({$metadata:tx(e),...r});return(0,k.to)(i,e.body)},tp=async(e,t)=>{let r=(0,k.UI)({}),n=e.body;Object.assign(r,(0,k.qn)(n,{message:k.pY}));let i=new e8({$metadata:tx(e),...r});return(0,k.to)(i,e.body)},th=async(e,t)=>{let r=(0,k.UI)({}),n=e.body;Object.assign(r,(0,k.qn)(n,{message:k.pY}));let i=new e4({$metadata:tx(e),...r});return(0,k.to)(i,e.body)},ty=async(e,t)=>{let r=(0,k.UI)({}),n=e.body;Object.assign(r,(0,k.qn)(n,{message:k.pY}));let i=new e5({$metadata:tx(e),...r});return(0,k.to)(i,e.body)},tg=(e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>null!=r.chunk?{chunk:await tv(r.chunk,t)}:null!=r.internalServerException?{internalServerException:await tm(r.internalServerException,t)}:null!=r.modelStreamErrorException?{modelStreamErrorException:await tw(r.modelStreamErrorException,t)}:null!=r.validationException?{validationException:await tE(r.validationException,t)}:null!=r.throttlingException?{throttlingException:await tS(r.throttlingException,t)}:null!=r.modelTimeoutException?{modelTimeoutException:await tb(r.modelTimeoutException,t)}:{$unknown:e}),tm=async(e,t)=>ts({...e,body:await (0,tt.e1)(e.body,t)},t),tw=async(e,t)=>tu({...e,body:await (0,tt.e1)(e.body,t)},t),tb=async(e,t)=>td({...e,body:await (0,tt.e1)(e.body,t)},t),tv=async(e,t)=>{let r={};return Object.assign(r,tA(await (0,tt.e1)(e.body,t),t)),r},tS=async(e,t)=>th({...e,body:await (0,tt.e1)(e.body,t)},t),tE=async(e,t)=>ty({...e,body:await (0,tt.e1)(e.body,t)},t),tA=(e,t)=>(0,k.qn)(e,{bytes:t.base64Decoder}),tx=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),tT=e=>null!=e&&""!==e&&(!Object.getOwnPropertyNames(e).includes("length")||0!=e.length)&&(!Object.getOwnPropertyNames(e).includes("size")||0!=e.size),tk="accept",t$="contentType",tR="content-type",tC="x-amzn-bedrock-accept",tP="x-amzn-bedrock-content-type";class tO extends k.mY.classBuilder().ep({..._}).m(function(e,t,r,n){return[(0,eY.p2)(r,this.serialize,this.deserialize),(0,x.a3)(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModelWithResponseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","InvokeModelWithResponseStreamCommand").f(e7,te).ser(tr).de(tn).build(){}var tI=r(16292);let t_={"claude-3-sonnet":"anthropic.claude-3-sonnet-20240229-v1:0","claude-v2":"anthropic.claude-v2","claude-v2.1":"anthropic.claude-v2:1","claude-v1":"anthropic.claude-v1","claude-instant":"anthropic.claude-instant-v1"};async function tU(e,t){let r=e.body;if(!r)throw Error("No iterable available");return new ReadableStream({async start(e){let n=new TextDecoder,i="";for await(let o of(t?.onStart?.(),r)){let r=o.chunk?.bytes;if(r){let o=JSON.parse(n.decode(r)),a=o?.delta?.text??"";t?.onToken?.(a),i+=a,e.enqueue(a)}}t?.onFinal?.(i),t?.onCompletion?.(i),e.close()}})}async function tN(){return Response.json("",{status:c.Xd?.secrets?.Bedrock_accessKeyId&&c.Xd?.secrets?.Bedrock_secretAccessKey?200:401})}async function tj(e){if(c.Xd?.config?.apiKey?.toLowerCase()!=="bedrock")return Response.json("Oops! The selected model has a potential configuration conflict. Please ensure that all your open instances of VSCode have the same provider.",{status:400});let{messages:t}=await e.json();"user"!==(t=(0,y.D)({messages:t}))[0].role&&(t=t.slice(1));let r=e.headers.get("model"),n=e.headers.get("promptType"),i=await h.Z.getLanguage(),o=await h.Z.getIdeLanguage(),a="Chat";if(n){a=t[t.length-1].content+"CodeGPT";let e=(0,d.u)({promptType:t[t.length-1].content,cleanPromptText:await h.Z.getSelectedText(),language:o});e&&(t[t.length-1].content=e)}let s=await h.Z.getSelectedText();s&&(t[t.length-1].content+="\n```"+i+"\n"+s+"\n```");let l=(0,p.q)(t.map(e=>e.content).join(""));try{if(!c.Xd.secrets?.Bedrock_accessKeyId||!c.Xd.secrets?.Bedrock_secretAccessKey||!c.Xd.secrets?.Bedrock_region){let e=Error("You need to set your AWS credentials first.");throw e.status=401,e}let e=new eJ({region:c.Xd.secrets?.Bedrock_region??"us-east-1",credentials:{accessKeyId:c.Xd.secrets?.Bedrock_accessKeyId??"",secretAccessKey:c.Xd.secrets?.Bedrock_secretAccessKey??""}}),o=c.Xd?.globalState?.config,d=await e.send(new tO({modelId:t_[r]??t_["claude-v2"],contentType:"application/json",accept:"application/json",body:JSON.stringify({messages:t,max_tokens:o?.maxTokens||1500,temperature:o?.temperature||.3,anthropic_version:"bedrock-2023-05-31"})})),h=await tU(d,{onFinal:async e=>{let t=(0,p.q)(e);(0,u.q)({eventName:a,provider:"Bedrock",model:r??"anthropic.claude-2",promptTokens:l,completionTokens:t,totalTokens:l+t,statusCode:200})}}),y=t.slice(0,-1).some(e=>e.content.includes(s));if(s&&(n||!y)){let e=await (0,f.V)(["```"+i+"\n"+s+"\n```"],h);return new tI.wn(e)}return new tI.wn(h)}catch(e){return(0,u.q)({eventName:a,provider:"Bedrock",model:r??"anthropic.claude-2",promptTokens:l,totalTokens:l,statusCode:e.status??500}),Response.json({message:e.message,status:e.status??500},{status:e.status??500})}}let tD=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/[port]/api/(providers)/bedrock/route",pathname:"/[port]/api/bedrock",filename:"route",bundlePath:"app/[port]/api/(providers)/bedrock/route"},resolvedPagePath:"/Users/maol/WebstormProjects/Trabajo/codegpt-nextjs/app/[port]/api/(providers)/bedrock/route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:tM,staticGenerationAsyncStorage:tq,serverHooks:tL}=tD,tF="/[port]/api/(providers)/bedrock/route";function tH(){return(0,l.patchFetch)({serverHooks:tL,staticGenerationAsyncStorage:tq})}},47645:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=void 0;var n=r(43322),i=r(60580),o=r(99216),a=function(){function e(){this.crc32=new o.Crc32}return e.prototype.update=function(e){(0,i.isEmptyData)(e)||this.crc32.update((0,i.convertToBuffer)(e))},e.prototype.digest=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){return[2,(0,i.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new o.Crc32},e}();t.AwsCrc32=a},99216:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=t.Crc32=t.crc32=void 0;var n=r(43322),i=r(60580);t.crc32=function(e){return new o().update(e).digest()};var o=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,r;try{for(var i=n.__values(e),o=i.next();!o.done;o=i.next()){var s=o.value;this.checksum=this.checksum>>>8^a[(this.checksum^s)&255]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=o;var a=(0,i.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),s=r(47645);Object.defineProperty(t,"AwsCrc32",{enumerable:!0,get:function(){return s.AwsCrc32}})},43322:(e,t,r)=>{r.r(t),r.d(t,{__assign:()=>o,__asyncDelegator:()=>v,__asyncGenerator:()=>b,__asyncValues:()=>S,__await:()=>w,__awaiter:()=>u,__classPrivateFieldGet:()=>T,__classPrivateFieldSet:()=>k,__createBinding:()=>f,__decorate:()=>s,__exportStar:()=>p,__extends:()=>i,__generator:()=>d,__importDefault:()=>x,__importStar:()=>A,__makeTemplateObject:()=>E,__metadata:()=>c,__param:()=>l,__read:()=>y,__rest:()=>a,__spread:()=>g,__spreadArrays:()=>m,__values:()=>h});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function s(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function l(e,t){return function(r,n){t(r,n,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})}function d(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function m(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function w(e){return this instanceof w?(this.v=e,this):new w(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||s(e,t)})})}function s(e,t){try{var r;(r=i[e](t)).value instanceof w?Promise.resolve(r.value.v).then(l,c):u(o[0][2],r)}catch(e){u(o[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function v(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:w(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function S(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=h(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,i,(t=e[r](t)).done,t.value)})}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function k(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},64611:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var n=r(61293),i="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:n.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}},60580:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var n=r(64611);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return n.convertToBuffer}});var i=r(29277);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var o=r(34183);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var a=r(71922);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return a.uint32ArrayFrom}})},29277:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},34183:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},71922:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}},29648:(e,t,r)=>{r.d(t,{H:()=>i});let n=!1,i=e=>{e&&!n&&16>parseInt(e.substring(1,e.indexOf(".")))&&(n=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 14.x on May 1, 2024.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to an active Node.js LTS version.

More information can be found at: https://a.co/dzr2AJd`))}},90386:(e,t,r)=>{r.d(t,{V:()=>u});var n=r(41966);let i=e=>new Date(Date.now()+e),o=e=>n.Zn.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,a=(e,t)=>Math.abs(i(t).getTime()-e)>=3e5,s=(e,t)=>{let r=Date.parse(e);return a(r,t)?r-Date.now():t},l=(e,t)=>{if(!t)throw Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},c=async e=>{let t=l("context",e.context),r=l("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],i=l("signer",r.signer);return{config:r,signer:await i(n),signingRegion:e?.signingRegion,signingName:e?.signingName}};class u{async sign(e,t,r){if(!n.aW.isInstance(e))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:a,signingRegion:s,signingName:l}=await c(r);return await a.sign(e,{signingDate:i(o.systemClockOffset),signingRegion:s,signingService:l})}errorHandler(e){return t=>{let r=t.ServerTime??o(t.$response);if(r){let n=l("config",e.config),i=n.systemClockOffset;n.systemClockOffset=s(r,n.systemClockOffset),n.systemClockOffset!==i&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(e,t){let r=o(e);if(r){let e=l("config",t.config);e.systemClockOffset=s(r,e.systemClockOffset)}}}},73797:(e,t,r)=>{r.d(t,{K:()=>V});var n,i=r(71424),o=r(73382),a=r(39701),s=r(59064),l=r(13571);let c="X-Amz-Date",u="X-Amz-Signature",d="X-Amz-Security-Token",f="authorization",p=c.toLowerCase(),h=[f,p,"date"],y=u.toLowerCase(),g="x-amz-content-sha256",m=d.toLowerCase(),w={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},b=/^proxy-/,v=/^sec-/,S="AWS4-HMAC-SHA256",E="aws4_request",A={},x=[],T=(e,t,r)=>`${e}/${t}/${r}/${E}`,k=async(e,t,r,n,i)=>{let a=await $(e,t.secretAccessKey,t.accessKeyId),s=`${r}:${n}:${i}:${(0,o.N)(a)}:${t.sessionToken}`;if(s in A)return A[s];for(x.push(s);x.length>50;)delete A[x.shift()];let l=`AWS4${t.secretAccessKey}`;for(let t of[r,n,i,E])l=await $(e,l,t);return A[s]=l},$=(e,t,r)=>{let n=new e(t);return n.update((0,l._f)(r)),n.digest()},R=({headers:e},t,r)=>{let n={};for(let i of Object.keys(e).sort()){if(void 0==e[i])continue;let o=i.toLowerCase();(!(o in w||t?.has(o)||b.test(o)||v.test(o))||r&&(!r||r.has(o)))&&(n[o]=e[i].trim().replace(/\s+/g," "))}return n},C=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===y)continue;t.push(n);let i=e[n];"string"==typeof i?r[n]=`${(0,s.i)(n)}=${(0,s.i)(i)}`:Array.isArray(i)&&(r[n]=i.slice(0).reduce((e,t)=>e.concat([`${(0,s.i)(n)}=${(0,s.i)(t)}`]),[]).sort().join("&"))}return t.map(e=>r[e]).filter(e=>e).join("&")};var P=r(20739);let O=async({headers:e,body:t},r)=>{for(let t of Object.keys(e))if(t.toLowerCase()===g)return e[t];if(void 0==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||(0,P.e)(t)){let e=new r;return e.update((0,l._f)(t)),(0,o.N)(await e.digest())}return"UNSIGNED-PAYLOAD"};class I{format(e){let t=[];for(let r of Object.keys(e)){let n=(0,l.$x)(r);t.push(Uint8Array.from([n.byteLength]),n,this.formatHeaderValue(e[r]))}let r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0)),n=0;for(let e of t)r.set(e,n),n+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let a=new Uint8Array(i.buffer);return a.set(e.value,3),a;case"string":let s=(0,l.$x)(e.value),c=new DataView(new ArrayBuffer(3+s.byteLength));c.setUint8(0,7),c.setUint16(1,s.byteLength,!1);let u=new Uint8Array(c.buffer);return u.set(s,3),u;case"timestamp":let d=new Uint8Array(9);return d[0]=8,d.set(U.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!_.test(e.value))throw Error(`Invalid UUID received: ${e.value}`);let f=new Uint8Array(17);return f[0]=9,f.set((0,o.H)(e.value.replace(/\-/g,"")),1),f}}}!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(n||(n={}));let _=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class U{constructor(e){if(this.bytes=e,8!==e.byteLength)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x7fffffffffffffff||e<-0x8000000000000000)throw Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let t=new Uint8Array(8);for(let r=7,n=Math.abs(Math.round(e));r>-1&&n>0;r--,n/=256)t[r]=n;return e<0&&N(t),new U(t)}valueOf(){let e=this.bytes.slice(0),t=128&e[0];return t&&N(e),parseInt((0,o.N)(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function N(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}let j=(e,t)=>{for(let r of(e=e.toLowerCase(),Object.keys(t)))if(e===r.toLowerCase())return!0;return!1},D=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?M(t):void 0}),M=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{}),q=(e,t={})=>{let{headers:r,query:n={}}="function"==typeof e.clone?e.clone():D(e);for(let e of Object.keys(r)){let i=e.toLowerCase();"x-amz-"!==i.slice(0,6)||t.unhoistableHeaders?.has(i)||(n[e]=r[e],delete r[e])}return{...e,headers:r,query:n}},L=e=>{for(let t of Object.keys((e="function"==typeof e.clone?e.clone():D(e)).headers))h.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},F=e=>H(e).toISOString().replace(/\.\d{3}Z$/,"Z"),H=e=>"number"==typeof e?new Date(1e3*e):"string"==typeof e?new Date(Number(e)?1e3*Number(e):e):e;class B{constructor({applyChecksum:e,credentials:t,region:r,service:n,sha256:i,uriEscapePath:o=!0}){this.headerFormatter=new I,this.service=n,this.sha256=i,this.uriEscapePath=o,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=(0,a.$)(r),this.credentialProvider=(0,a.$)(t)}async presign(e,t={}){let{signingDate:r=new Date,expiresIn:n=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,signingRegion:s,signingService:l}=t,f=await this.credentialProvider();this.validateResolvedCredentials(f);let p=s??await this.regionProvider(),{longDate:h,shortDate:y}=z(r);if(n>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let g=T(y,p,l??this.service),m=q(L(e),{unhoistableHeaders:o});f.sessionToken&&(m.query[d]=f.sessionToken),m.query["X-Amz-Algorithm"]=S,m.query["X-Amz-Credential"]=`${f.accessKeyId}/${g}`,m.query[c]=h,m.query["X-Amz-Expires"]=n.toString(10);let w=R(m,i,a);return m.query["X-Amz-SignedHeaders"]=W(w),m.query[u]=await this.getSignature(h,g,this.getSigningKey(f,p,y,l),this.createCanonicalRequest(m,w,await O(e,this.sha256))),m}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:r=new Date,priorSignature:n,signingRegion:i,signingService:a}){let s=i??await this.regionProvider(),{shortDate:l,longDate:c}=z(r),u=T(l,s,a??this.service),d=await O({headers:{},body:t},this.sha256),f=new this.sha256;f.update(e);let p=["AWS4-HMAC-SHA256-PAYLOAD",c,u,n,(0,o.N)(await f.digest()),d].join("\n");return this.signString(p,{signingDate:r,signingRegion:s,signingService:a})}async signMessage(e,{signingDate:t=new Date,signingRegion:r,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:r,signingService:n,priorSignature:e.priorSignature}).then(t=>({message:e.message,signature:t}))}async signString(e,{signingDate:t=new Date,signingRegion:r,signingService:n}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let a=r??await this.regionProvider(),{shortDate:s}=z(t),c=new this.sha256(await this.getSigningKey(i,a,s,n));return c.update((0,l._f)(e)),(0,o.N)(await c.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:r,unsignableHeaders:n,signingRegion:i,signingService:o}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let s=i??await this.regionProvider(),l=L(e),{longDate:c,shortDate:u}=z(t),d=T(u,s,o??this.service);l.headers[p]=c,a.sessionToken&&(l.headers[m]=a.sessionToken);let h=await O(l,this.sha256);!j(g,l.headers)&&this.applyChecksum&&(l.headers[g]=h);let y=R(l,n,r),w=await this.getSignature(c,d,this.getSigningKey(a,s,u,o),this.createCanonicalRequest(l,y,h));return l.headers[f]=`${S} Credential=${a.accessKeyId}/${d}, SignedHeaders=${W(y)}, Signature=${w}`,l}createCanonicalRequest(e,t,r){let n=Object.keys(t).sort();return`${e.method}
${this.getCanonicalPath(e)}
${C(e)}
${n.map(e=>`${e}:${t[e]}`).join("\n")}

${n.join(";")}
${r}`}async createStringToSign(e,t,r){let n=new this.sha256;n.update((0,l._f)(r));let i=await n.digest();return`${S}
${e}
${t}
${(0,o.N)(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let t=[];for(let r of e.split("/"))r?.length!==0&&"."!==r&&(".."===r?t.pop():t.push(r));let r=`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`;return(0,s.i)(r).replace(/%2F/g,"/")}return e}async getSignature(e,t,r,n){let i=await this.createStringToSign(e,t,n),a=new this.sha256(await r);return a.update((0,l._f)(i)),(0,o.N)(await a.digest())}getSigningKey(e,t,r,n){return k(this.sha256,e,r,t,n||this.service)}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw Error("Resolved credential object is not valid")}}let z=e=>{let t=F(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},W=e=>Object.keys(e).sort().join(";"),V=e=>{let t,r;e.credentials&&(t=(0,i.CU)(e.credentials,i.BP,i.zV)),t||(t=e.credentialDefaultProvider?(0,i.$E)(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):async()=>{throw Error("`credentials` is missing")});let{signingEscapePath:n=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:a}=e;return r=e.signer?(0,i.$E)(e.signer):e.regionInfoProvider?()=>(0,i.$E)(e.region)().then(async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t]).then(([r,i])=>{let{signingRegion:o,signingService:s}=r;e.signingRegion=e.signingRegion||o||i,e.signingName=e.signingName||s||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:n};return new(e.signerConstructor||B)(l)}):async r=>{let o=(r=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await (0,i.$E)(e.region)(),properties:{}},r)).signingRegion,s=r.signingName;e.signingRegion=e.signingRegion||o,e.signingName=e.signingName||s||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:n};return new(e.signerConstructor||B)(l)},{...e,systemClockOffset:o,signingEscapePath:n,credentials:t,signer:r}}},6881:(e,t,r)=>{r.d(t,{J:()=>i});var n=r(39539);let i=(e,t)=>(0,n.Wg)(e,t).then(e=>t.utf8Encoder(e))},64628:(e,t,r)=>{r.d(t,{e1:()=>i,fk:()=>o,mJ:()=>a});var n=r(6881);let i=(e,t)=>(0,n.J)(e,t).then(e=>{if(e.length)try{return JSON.parse(e)}catch(t){throw t?.name==="SyntaxError"&&Object.defineProperty(t,"$responseBodyText",{value:e}),t}return{}}),o=async(e,t)=>{let r=await i(e,t);return r.message=r.message??r.Message,r},a=(e,t)=>{let r,n;let i=e=>{let t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(r=e.headers,n="x-amzn-errortype",Object.keys(r).find(e=>e.toLowerCase()===n.toLowerCase()));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):void 0}},45495:(e,t,r)=>{r.r(t),r.d(t,{credentialsTreatedAsExpired:()=>l,credentialsWillNeedRefresh:()=>s,defaultProvider:()=>a});var n=r(97110),i=r(39435);let o=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:i,fromContainerMetadata:o,fromInstanceMetadata:a}=await r.e(9021).then(r.bind(r,89021));if(process.env[i]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node","remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:t}=await r.e(7356).then(r.bind(r,57356));return(0,n.tS)(t(e),o(e))}return process.env.AWS_EC2_METADATA_DISABLED?async()=>{throw new n.mV("EC2 Instance Metadata Service access disabled")}:(e.logger?.debug("@aws-sdk/credential-provider-node","remoteProvider::fromInstanceMetadata"),a(e))},a=(e={})=>(0,n.HP)((0,n.tS)(...e.profile||process.env[i.TH]?[]:[async()=>{e.logger?.debug("@aws-sdk/credential-provider-node","defaultProvider::fromEnv");let{fromEnv:t}=await r.e(4032).then(r.bind(r,94032));return t(e)()}],async()=>{e.logger?.debug("@aws-sdk/credential-provider-node","defaultProvider::fromSSO");let{ssoStartUrl:t,ssoAccountId:i,ssoRegion:o,ssoRoleName:a,ssoSession:s}=e;if(!t&&!i&&!o&&!a&&!s)throw new n.mV("Skipping SSO provider in default chain (inputs do not include SSO fields).");let{fromSSO:l}=await r.e(2506).then(r.bind(r,52506));return l(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node","defaultProvider::fromIni");let{fromIni:t}=await r.e(3919).then(r.bind(r,53919));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node","defaultProvider::fromProcess");let{fromProcess:t}=await r.e(9002).then(r.bind(r,9002));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node","defaultProvider::fromTokenFile");let{fromTokenFile:t}=await r.e(6820).then(r.bind(r,96820));return t(e)()},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node","defaultProvider::remoteProvider"),(await o(e))()),async()=>{throw new n.mV("Could not load credentials from any providers",!1)}),l,s),s=e=>e?.expiration!==void 0,l=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5},24046:(e,t,r)=>{r.d(t,{G2:()=>s,S8:()=>i});var n=r(41966);function i(e){return e}let o=e=>t=>async r=>{if(!n.aW.isInstance(r.request))return t(r);let{request:i}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!i.headers[":authority"])delete i.headers.host,i.headers[":authority"]=i.hostname+(i.port?":"+i.port:"");else if(!i.headers.host){let e=i.hostname;null!=i.port&&(e+=`:${i.port}`),i.headers.host=e}return t(r)},a={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},s=e=>({applyToStack:t=>{t.add(o(e),a)}})},58158:(e,t,r)=>{r.d(t,{cV:()=>o});let n=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:i,commandName:o,logger:a,dynamoDbDocumentClientOptions:s={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:c}=s,u=l??t.inputFilterSensitiveLog,d=c??t.outputFilterSensitiveLog,{$metadata:f,...p}=n.output;return a?.info?.({clientName:i,commandName:o,input:u(r.input),output:d(p),metadata:f}),n}catch(l){let{clientName:e,commandName:n,logger:i,dynamoDbDocumentClientOptions:o={}}=t,{overrideInputFilterSensitiveLog:a}=o,s=a??t.inputFilterSensitiveLog;throw i?.error?.({clientName:e,commandName:n,input:s(r.input),error:l,metadata:l.$metadata}),l}},i={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},o=e=>({applyToStack:e=>{e.add(n(),i)}})},84119:(e,t,r)=>{r.d(t,{eV:()=>s});var n=r(41966);let i="X-Amzn-Trace-Id",o=e=>t=>async r=>{let o;let{request:a}=r;if(!n.aW.isInstance(a)||"node"!==e.runtime||a.headers.hasOwnProperty(i))return t(r);let s=process.env.AWS_LAMBDA_FUNCTION_NAME,l=process.env._X_AMZN_TRACE_ID;return"string"==typeof s&&s.length>0&&"string"==typeof(o=l)&&o.length>0&&(a.headers[i]=l),t({...r,request:a})},a={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},s=e=>({applyToStack:t=>{t.add(o(e),a)}})},16596:(e,t,r)=>{function n(e){return{...e,customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent}}r.d(t,{XJ:()=>p,er:()=>n});var i=r(95592),o=r(41966);let a="user-agent",s="x-amz-user-agent",l=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,c=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,u=e=>(t,r)=>async n=>{let{request:l}=n;if(!o.aW.isInstance(l))return t(n);let{headers:c}=l,u=r?.userAgent?.map(d)||[],f=(await e.defaultUserAgentProvider()).map(d),p=e?.customUserAgent?.map(d)||[],h=(0,i.Qj)(),y=(h?[h]:[]).concat([...f,...u,...p]).join(" "),g=[...f.filter(e=>e.startsWith("aws-sdk-")),...p].join(" ");return"browser"!==e.runtime?(g&&(c[s]=c[s]?`${c[a]} ${g}`:g),c[a]=y):c[s]=y,t({...n,request:l})},d=e=>{let t=e[0].split("/").map(e=>e.replace(l,"-")).join("/"),r=e[1]?.replace(c,"-"),n=t.indexOf("/"),i=t.substring(0,n),o=t.substring(n+1);return"api"===i&&(o=o.toLowerCase()),[i,o,r].filter(e=>e&&e.length>0).reduce((e,t,r)=>{switch(r){case 0:return t;case 1:return`${e}/${t}`;default:return`${e}#${t}`}},"")},f={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},p=e=>({applyToStack:t=>{t.add(u(e),f)}})},35903:(e,t,r)=>{r.d(t,{GW:()=>n,A1:()=>i});let n=e=>{let t=async()=>{if(void 0===e.region)throw Error("Region is missing from runtimeConfig");let t=e.region;return"string"==typeof t?t:t()};return{setRegion(e){t=e},region:()=>t}},i=e=>({region:e.region()})},95592:(e,t,r)=>{r.d(t,{Iu:()=>s,Qj:()=>a});var n=r(46293);let i=(e,t=!1)=>{if(t){for(let t of e.split("."))if(!i(t))return!1;return!0}return!(!(0,n.IA)(e)||e.length<3||e.length>63||e!==e.toLowerCase()||(0,n.dY)(e))},o=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}'),a=()=>"",s={isVirtualHostableS3Bucket:i,parseArn:e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,i,o,a,...s]=t;return"arn"!==r||""===n||""===i||""===s[0]?null:{partition:n,service:i,region:o,accountId:a,resourceId:s[0].includes("/")?s[0].split("/"):s}},partition:e=>{let{partitions:t}=o;for(let r of t){let{regions:t,outputs:n}=r;for(let[r,i]of Object.entries(t))if(r===e)return{...n,...i}}for(let r of t){let{regionRegex:t,outputs:n}=r;if(new RegExp(t).test(e))return{...n}}let r=t.find(e=>"aws"===e.id);if(!r)throw Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}}};n.DY.aws=s},80442:(e,t,r)=>{r.d(t,{fV:()=>l});var n=r(1071),i=r(22037),o=r(77282);let a={isCrtAvailable:!1},s=()=>a.isCrtAvailable?["md/crt-avail"]:null,l=({serviceId:e,clientVersion:t})=>{let r;let a=[["aws-sdk-js",t],["ua","2.0"],[`os/${(0,i.platform)()}`,(0,i.release)()],["lang/js"],["md/nodejs",`${o.versions.node}`]],l=s();l&&a.push(l),e&&a.push([`api/${e}`,t]),o.env.AWS_EXECUTION_ENV&&a.push([`exec-env/${o.env.AWS_EXECUTION_ENV}`]);let c=(0,n.M)({environmentVariableSelector:e=>e.AWS_SDK_UA_APP_ID,configFileSelector:e=>e["sdk-ua-app-id"],default:void 0})();return async()=>{if(!r){let e=await c;r=e?[...a,[`app/${e}`]]:[...a]}return r}}},61293:(e,t,r)=>{r.r(t),r.d(t,{fromUtf8:()=>o,toUtf8:()=>a});let n=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let n=e.charCodeAt(r);if(n<128)t.push(n);else if(n<2048)t.push(n>>6|192,63&n|128);else if(r+1<e.length&&(64512&n)==55296&&(64512&e.charCodeAt(r+1))==56320){let i=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(n>>12|224,n>>6&63|128,63&n|128)}return Uint8Array.from(t)},i=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let n=e[r];n<128?t+=String.fromCharCode(n):192<=n&&n<224?t+=String.fromCharCode((31&n)<<6|63&e[++r]):240<=n&&n<365?t+=decodeURIComponent("%"+[n,e[++r],e[++r],e[++r]].map(e=>e.toString(16)).join("%")):t+=String.fromCharCode((15&n)<<12|(63&e[++r])<<6|63&e[++r])}return t},o=e=>"function"==typeof TextEncoder?new TextEncoder().encode(e):n(e),a=e=>"function"==typeof TextDecoder?new TextDecoder("utf-8").decode(e):i(e)},83311:(e,t,r)=>{var n;r.d(t,{zb:()=>l,_c:()=>s,G7:()=>o,NL:()=>a,Xb:()=>d});let i=(e,t,r)=>{if(t in e){if("true"===e[t])return!0;if("false"===e[t])return!1;throw Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};!function(e){e.ENV="env",e.CONFIG="shared config entry"}(n||(n={}));let o={environmentVariableSelector:e=>i(e,"AWS_USE_DUALSTACK_ENDPOINT",n.ENV),configFileSelector:e=>i(e,"use_dualstack_endpoint",n.CONFIG),default:!1},a={environmentVariableSelector:e=>i(e,"AWS_USE_FIPS_ENDPOINT",n.ENV),configFileSelector:e=>i(e,"use_fips_endpoint",n.CONFIG),default:!1};r(39701);let s={environmentVariableSelector:e=>e.AWS_REGION,configFileSelector:e=>e.region,default:()=>{throw Error("Region is missing")}},l={preferredFile:"credentials"},c=e=>"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips")),u=e=>c(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,d=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw Error("Region is missing");return{...e,region:async()=>"string"==typeof t?u(t):u(await t()),useFipsEndpoint:async()=>!!c("string"==typeof t?t:await t())||("function"!=typeof r?Promise.resolve(!!r):r())}}},71424:(e,t,r)=>{r.d(t,{K5:()=>p,oH:()=>h,zV:()=>g,tZ:()=>a,aZ:()=>f,BP:()=>y,CU:()=>m,$E:()=>w,cu:()=>v}),r(28391);var n=r(39701);let i=(e,t)=>(r,i)=>async o=>{let a=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,i,o.input)),s=function(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}(e.httpAuthSchemes),l=(0,n.J)(i),c=[];for(let r of a){let n=s.get(r.schemeId);if(!n){c.push(`HttpAuthScheme \`${r.schemeId}\` was not enabled for this service.`);continue}let o=n.identityProvider(await t.identityProviderConfigProvider(e));if(!o){c.push(`HttpAuthScheme \`${r.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:a={},signingProperties:u={}}=r.propertiesExtractor?.(e,i)||{};r.identityProperties=Object.assign(r.identityProperties||{},a),r.signingProperties=Object.assign(r.signingProperties||{},u),l.selectedHttpAuthScheme={httpAuthOption:r,identity:await o(r.identityProperties),signer:n.signer};break}if(!l.selectedHttpAuthScheme)throw Error(c.join("\n"));return r(o)},o={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:r(75893).Q$.name},a=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(i(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),o)}});r(48787).JK.name;var s=r(41966);let l=e=>e=>{throw e},c=(e,t)=>{},u=e=>(e,t)=>async r=>{if(!s.aW.isInstance(r.request))return e(r);let i=(0,n.J)(t).selectedHttpAuthScheme;if(!i)throw Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:u}=i,d=await e({...r,request:await u.sign(r.request,a,o)}).catch((u.errorHandler||l)(o));return(u.successHandler||c)(d.response,o),d},d={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:r(59179).yg.name},f=e=>({applyToStack:t=>{t.addRelativeTo(u(e),d)}});class p{constructor(e){for(let[t,r]of(this.authSchemes=new Map,Object.entries(e)))void 0!==r&&this.authSchemes.set(t,r)}getIdentityProvider(e){return this.authSchemes.get(e)}}class h{async sign(e,t,r){return e}}let y=e=>g(e)&&e.expiration.getTime()-Date.now()<3e5,g=e=>void 0!==e.expiration,m=(e,t,r)=>{let n,i,o;if(void 0===e)return;let a="function"!=typeof e?async()=>Promise.resolve(e):e,s=!1,l=async e=>{i||(i=a(e));try{n=await i,o=!0,s=!1}finally{i=void 0}return n};return void 0===t?async e=>((!o||e?.forceRefresh)&&(n=await l(e)),n):async e=>((!o||e?.forceRefresh)&&(n=await l(e)),s||(r(n)?t(n)&&await l(e):s=!0),n)},w=e=>{if("function"==typeof e)return e;let t=Promise.resolve(e);return()=>t};var b=r(39539);function v(e,t){return new S(e,t)}class S{constructor(e,t){this.input=e,this.context=t,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:e,protocol:t="https",port:r,path:n}=await this.context.endpoint();for(let e of(this.path=n,this.resolvePathStack))e(this.path);return new s.aW({protocol:t,hostname:this.hostname||e,port:r,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(t=>{this.path=`${t?.endsWith("/")?t.slice(0,-1):t||""}`+e}),this}p(e,t,r,n){return this.resolvePathStack.push(i=>{this.path=(0,b.Is)(i,this.input,e,t,r,n)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}},40804:(e,t,r)=>{r.d(t,{k:()=>s});var n=r(63234),i=r(13571),o=r(14300),a=r(6113);class s{constructor(e,t){this.algorithmIdentifier=e,this.secret=t,this.reset()}update(e,t){this.hash.update((0,i._f)(l(e,t)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,a.createHmac)(this.algorithmIdentifier,l(this.secret)):(0,a.createHash)(this.algorithmIdentifier)}}function l(e,t){return o.Buffer.isBuffer(e)?e:"string"==typeof e?(0,n.m)(e,t):ArrayBuffer.isView(e)?(0,n.g)(e.buffer,e.byteOffset,e.byteLength):(0,n.g)(e)}},20739:(e,t,r)=>{r.d(t,{e:()=>n});let n=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)},64339:(e,t,r)=>{r.d(t,{VG:()=>a});var n=r(41966);let i="content-length",o={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},a=e=>({applyToStack:t=>{var r;t.add((r=e.bodyLengthChecker,e=>async t=>{let o=t.request;if(n.aW.isInstance(o)){let{body:e,headers:t}=o;if(e&&-1===Object.keys(t).map(e=>e.toLowerCase()).indexOf(i))try{let t=r(e);o.headers={...o.headers,[i]:String(t)}}catch(e){}}return e({...t,request:o})}),o)}})},75893:(e,t,r)=>{r.d(t,{Q$:()=>E,a3:()=>A,uW:()=>x});let n=async e=>{let t=e?.Bucket||"";if("string"==typeof e.Bucket&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),l(t)){if(!0===e.ForcePathStyle)throw Error("Path-style addressing cannot be used with ARN buckets")}else s(t)&&(-1===t.indexOf(".")||String(e.Endpoint).startsWith("http:"))&&t.toLowerCase()===t&&!(t.length<3)||(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},i=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,o=/(\d+\.){3}\d+/,a=/\.\./,s=e=>i.test(e)&&!o.test(e)&&!a.test(e),l=e=>{let[t,r,n,,,i]=e.split(":"),o="arn"===t&&e.split(":").length>=6,a=!!(o&&r&&n&&i);if(o&&!a)throw Error(`Invalid ARN: ${e} was an invalid ARN.`);return a},c=(e,t,r)=>{let n=async()=>{let n=r[e]??r[t];return"function"==typeof n?n():n};return"credentialScope"===e||"CredentialScope"===t?async()=>{let e="function"==typeof r.credentials?await r.credentials():r.credentials;return e?.credentialScope??e?.CredentialScope}:"endpoint"===e||"endpoint"===t?async()=>{let e=await n();if(e&&"object"==typeof e){if("url"in e)return e.url.href;if("hostname"in e){let{protocol:t,hostname:r,port:n,path:i}=e;return`${t}//${r}${n?":"+n:""}${i}`}}return e}:n};var u=r(1071),d=r(39435);let f="AWS_ENDPOINT_URL",p="endpoint_url",h=e=>({environmentVariableSelector:t=>{let r=t[[f,...e.split(" ").map(e=>e.toUpperCase())].join("_")];if(r)return r;let n=t[f];if(n)return n},configFileSelector:(t,r)=>{if(r&&t.services){let n=r[["services",t.services].join(d.Ck)];if(n){let t=n[[e.split(" ").map(e=>e.toLowerCase()).join("_"),p].join(d.Ck)];if(t)return t}}let n=t[p];if(n)return n},default:void 0}),y=async e=>(0,u.M)(h(e))();var g=r(96636);let m=e=>"object"==typeof e?"url"in e?(0,g.e)(e.url):e:(0,g.e)(e),w=async(e,t,r,n)=>{if(!r.endpoint){let e=await y(r.serviceId||"");e&&(r.endpoint=()=>Promise.resolve(m(e)))}let i=await b(e,t,r);if("function"!=typeof r.endpointProvider)throw Error("config.endpointProvider is not set.");return r.endpointProvider(i,n)},b=async(e,t,r)=>{let i={},o=t?.getEndpointParameterInstructions?.()||{};for(let[t,n]of Object.entries(o))switch(n.type){case"staticContextParams":i[t]=n.value;break;case"contextParams":i[t]=e[n.name];break;case"clientContextParams":case"builtInParams":i[t]=await c(n.name,t,r)();break;default:throw Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(n))}return 0===Object.keys(o).length&&Object.assign(i,r),"s3"===String(r.serviceId).toLowerCase()&&await n(i),i};var v=r(39701);let S=({config:e,instructions:t})=>(r,n)=>async i=>{let o=await w(i.input,{getEndpointParameterInstructions:()=>t},{...e},n);n.endpointV2=o,n.authSchemes=o.properties?.authSchemes;let a=n.authSchemes?.[0];if(a){n.signing_region=a.signingRegion,n.signing_service=a.signingName;let e=(0,v.J)(n),t=e?.selectedHttpAuthScheme?.httpAuthOption;t&&(t.signingProperties=Object.assign(t.signingProperties||{},{signing_region:a.signingRegion,signingRegion:a.signingRegion,signing_service:a.signingName,signingName:a.signingName,signingRegionSet:a.signingRegionSet},a.properties))}return r({...i})},E={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:r(48787).JK.name},A=(e,t)=>({applyToStack:r=>{r.addRelativeTo(S({config:e,instructions:t}),E)}}),x=e=>{let t=e.tls??!0,{endpoint:r}=e,n=null!=r?async()=>m(await (0,v.$)(r)()):void 0,i=!!r;return{...e,endpoint:n,tls:t,isCustomEndpoint:i,useDualstackEndpoint:(0,v.$)(e.useDualstackEndpoint??!1),useFipsEndpoint:(0,v.$)(e.useFipsEndpoint??!1)}}},59179:(e,t,r)=>{r.d(t,{Hs:()=>d,aK:()=>p,NQ:()=>E,BC:()=>f,yg:()=>S});var n=r(96602),i=r(41966),o=r(94248),a=r(56573);let s=e=>e instanceof Error?e:e instanceof Object?Object.assign(Error(),e):"string"==typeof e?Error(e):Error(`AWS SDK error wrapper for ${e}`);var l=r(39701);let c="AWS_MAX_ATTEMPTS",u="max_attempts",d={environmentVariableSelector:e=>{let t=e[c];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw Error(`Environment variable ${c} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[u];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw Error(`Shared config file entry ${u} mast be a number, got "${t}"`);return r},default:n.J},f=e=>{let{retryStrategy:t}=e,r=(0,l.$)(e.maxAttempts??n.J);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await (0,l.$)(e.retryMode)()===n.Ul.ADAPTIVE?new n.AY(r):new n.Uz(r))}},p={environmentVariableSelector:e=>e.AWS_RETRY_MODE,configFileSelector:e=>e.retry_mode,default:n.CA};var h=r(39539),y=r(12781);let g=e=>e?.body instanceof y.Readable||"undefined"!=typeof ReadableStream&&e?.body instanceof ReadableStream,m=e=>(t,r)=>async o=>{let l=await e.retryStrategy(),c=await e.maxAttempts();if(!w(l))return l?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",l.mode]]),l.retry(t,o);{let e=await l.acquireInitialRetryToken(r.partition_id),u=Error(),d=0,f=0,{request:p}=o,y=i.aW.isInstance(p);for(y&&(p.headers[n.lk]=(0,a.Z)());;)try{y&&(p.headers[n.r5]=`attempt=${d+1}; max=${c}`);let{response:r,output:i}=await t(o);return l.recordSuccess(e),i.$metadata.attempts=d+1,i.$metadata.totalRetryDelay=f,{response:r,output:i}}catch(i){let t=b(i);if(u=s(i),y&&g(p))throw(r.logger instanceof h.vk?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),u;try{e=await l.refreshRetryTokenForRetry(e,t)}catch(e){throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=d+1,u.$metadata.totalRetryDelay=f,u}d=e.getRetryCount();let n=e.getRetryDelay();f+=n,await new Promise(e=>setTimeout(e,n))}}},w=e=>void 0!==e.acquireInitialRetryToken&&void 0!==e.refreshRetryTokenForRetry&&void 0!==e.recordSuccess,b=e=>{let t={error:e,errorType:v(e)},r=A(e.$response);return r&&(t.retryAfterHint=r),t},v=e=>(0,o.pK)(e)?"THROTTLING":(0,o.iH)(e)?"TRANSIENT":(0,o.o7)(e)?"SERVER_ERROR":"CLIENT_ERROR",S={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},E=e=>({applyToStack:t=>{t.add(m(e),S)}}),A=e=>{if(!i.Zn.isInstance(e))return;let t=Object.keys(e.headers).find(e=>"retry-after"===e.toLowerCase());if(!t)return;let r=e.headers[t],n=Number(r);return new Date(Number.isNaN(n)?r:1e3*n)}},48787:(e,t,r)=>{r.d(t,{p2:()=>s,JK:()=>a});let n=(e,t)=>(r,n)=>async n=>{let{response:i}=await r(n);try{let r=await t(i,e);return{response:i,output:r}}catch(e){throw Object.defineProperty(e,"$response",{value:i}),"$metadata"in e||(e.message+="\n  Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.",void 0!==e.$responseBodyText&&e.$response&&(e.$response.body=e.$responseBodyText)),e}},i=(e,t)=>(r,n)=>async i=>{let o=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!o)throw Error("No valid endpoint provider available.");let a=await t(i.input,{...e,endpoint:o});return r({...i,request:a})},o={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},a={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function s(e,t,r){return{applyToStack:s=>{s.add(n(e,r),o),s.add(i(e,t),a)}}}},1071:(e,t,r)=>{r.d(t,{M:()=>c});var n=r(97110);let i=e=>async()=>{try{let t=e(process.env);if(void 0===t)throw Error();return t}catch(t){throw new n.mV(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var o=r(39435);let a=(e,{preferredFile:t="config",...r}={})=>async()=>{let i=(0,o.Jl)(r),{configFile:a,credentialsFile:s}=await (0,o.Zl)(r),l=s[i]||{},c=a[i]||{},u="config"===t?{...l,...c}:{...c,...l};try{let r=e(u,"config"===t?a:s);if(void 0===r)throw Error();return r}catch(t){throw new n.mV(t.message||`Cannot load config for profile ${i} in SDK configuration files with getter: ${e}`)}},s=e=>"function"==typeof e,l=e=>s(e)?async()=>await e():(0,n.f$)(e),c=({environmentVariableSelector:e,configFileSelector:t,default:r},o={})=>(0,n.HP)((0,n.tS)(i(e),a(t,o),l(r)))},60660:(e,t,r)=>{r.d(t,{NA:()=>h,CF:()=>g});var n=r(41966),i=r(59064),o=r(13685),a=r(95687);let s=["ECONNRESET","EPIPE","ETIMEDOUT"],l=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},c=(e,t,r=0)=>{if(!r)return;let n=setTimeout(()=>{e.destroy(),t(Object.assign(Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);e.on("socket",e=>{e.connecting?e.on("connect",()=>{clearTimeout(n)}):clearTimeout(n)})},u=(e,{keepAlive:t,keepAliveMsecs:r})=>{!0===t&&e.on("socket",e=>{e.setKeepAlive(t,r||0)})},d=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};var f=r(12781);async function p(e,t,r=1e3){let n=t.headers??{},i=n.Expect||n.expect,o=-1,a=!1;"100-continue"===i&&await Promise.race([new Promise(e=>{o=Number(setTimeout(e,Math.max(1e3,r)))}),new Promise(t=>{e.on("continue",()=>{clearTimeout(o),t()}),e.on("error",()=>{a=!0,clearTimeout(o),t()})})]),a||function(e,t){if(t instanceof f.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||"string"==typeof t){e.end(t);return}if("object"==typeof t&&t.buffer&&"number"==typeof t.byteOffset&&"number"==typeof t.byteLength){e.end(Buffer.from(t.buffer,t.byteOffset,t.byteLength));return}e.end(Buffer.from(t));return}e.end()}(e,t.body)}class h{static create(e){return"function"==typeof e?.handle?e:new h(e)}static checkSocketUsage(e,t){let{sockets:r,requests:n,maxSockets:i}=e;if("number"!=typeof i||i===1/0||Date.now()-15e3<t)return t;if(r&&n)for(let e in r){let t=r[e]?.length??0,o=n[e]?.length??0;if(t>=i&&o>=2*i)return console.warn("@smithy/node-http-handler:WARN",`socket usage at capacity=${t} and ${o} additional requests are enqueued.`,"See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html","or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config."),Date.now()}return t}constructor(e){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((t,r)=>{"function"==typeof e?e().then(e=>{t(this.resolveDefaultConfig(e))}).catch(r):t(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:t,connectionTimeout:r,socketTimeout:n,httpAgent:i,httpsAgent:s}=e||{};return{connectionTimeout:r,requestTimeout:t??n,httpAgent:i instanceof o.Agent||"function"==typeof i?.destroy?i:new o.Agent({keepAlive:!0,maxSockets:50,...i}),httpsAgent:s instanceof a.Agent||"function"==typeof s?.destroy?s:new a.Agent({keepAlive:!0,maxSockets:50,...s})}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:t}={}){let r;return this.config||(this.config=await this.configProvider),new Promise((f,y)=>{let g,m;let w=async e=>{await g,clearTimeout(r),f(e)},b=async e=>{await g,y(e)};if(!this.config)throw Error("Node HTTP request handler config is not resolved");if(t?.aborted){let e=Error("Request aborted");e.name="AbortError",b(e);return}let v="https:"===e.protocol,S=v?this.config.httpsAgent:this.config.httpAgent;r=setTimeout(()=>{this.socketWarningTimestamp=h.checkSocketUsage(S,this.socketWarningTimestamp)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3));let E=function(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=(0,i.i)(r),Array.isArray(n))for(let e=0,o=n.length;e<o;e++)t.push(`${r}=${(0,i.i)(n[e])}`);else{let e=r;(n||"string"==typeof n)&&(e+=`=${(0,i.i)(n)}`),t.push(e)}}return t.join("&")}(e.query||{});if(null!=e.username||null!=e.password){let t=e.username??"",r=e.password??"";m=`${t}:${r}`}let A=e.path;E&&(A+=`?${E}`),e.fragment&&(A+=`#${e.fragment}`);let x={headers:e.headers,host:e.hostname,method:e.method,path:A,port:e.port,agent:S,auth:m},T=(v?a.request:o.request)(x,e=>{w({response:new n.Zn({statusCode:e.statusCode||-1,reason:e.statusMessage,headers:l(e.headers),body:e})})});T.on("error",e=>{s.includes(e.code)?b(Object.assign(e,{name:"TimeoutError"})):b(e)}),c(T,b,this.config.connectionTimeout),d(T,b,this.config.requestTimeout),t&&(t.onabort=()=>{T.abort();let e=Error("Request aborted");e.name="AbortError",b(e)});let k=x.agent;"object"==typeof k&&"keepAlive"in k&&u(T,{keepAlive:k.keepAlive,keepAliveMsecs:k.keepAliveMsecs}),g=p(T,e,this.config.requestTimeout).catch(y)})}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(r=>({...r,[e]:t}))}httpHandlerConfigs(){return this.config??{}}}r(85158),Symbol.iterator;class y extends f.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,t,r){this.bufferedBytes.push(e),r()}}let g=e=>new Promise((t,r)=>{let n=new y;e.pipe(n),e.on("error",e=>{n.end(),r(e)}),n.on("error",r),n.on("finish",function(){t(new Uint8Array(Buffer.concat(this.bufferedBytes)))})})},97110:(e,t,r)=>{r.d(t,{mV:()=>i,kb:()=>n,rh:()=>o,tS:()=>a,f$:()=>s,HP:()=>l});class n extends Error{constructor(e,t=!0){super(e),this.tryNextLink=t,this.name="ProviderError",Object.setPrototypeOf(this,n.prototype)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}}class i extends n{constructor(e,t=!0){super(e,t),this.tryNextLink=t,this.name="CredentialsProviderError",Object.setPrototypeOf(this,i.prototype)}}class o extends n{constructor(e,t=!0){super(e,t),this.tryNextLink=t,this.name="TokenProviderError",Object.setPrototypeOf(this,o.prototype)}}let a=(...e)=>async()=>{let t;if(0===e.length)throw new n("No providers in chain");for(let r of e)try{return await r()}catch(e){if(t=e,e?.tryNextLink)continue;throw e}throw t},s=e=>()=>Promise.resolve(e),l=(e,t,r)=>{let n,i,o;let a=!1,s=async()=>{i||(i=e());try{n=await i,o=!0,a=!1}finally{i=void 0}return n};return void 0===t?async e=>((!o||e?.forceRefresh)&&(n=await s()),n):async e=>((!o||e?.forceRefresh)&&(n=await s()),a||(r&&!r(n)?a=!0:t(n)&&await s()),n)}},41966:(e,t,r)=>{r.d(t,{aW:()=>o,Zn:()=>a,cA:()=>n,AO:()=>i});let n=e=>{let t=e.httpHandler;return{setHttpHandler(e){t=e},httpHandler:()=>t,updateHttpClientConfig(e,r){t.updateHttpClientConfig(e,r)},httpHandlerConfigs:()=>t.httpHandlerConfigs()}},i=e=>({httpHandler:e.httpHandler()});r(28391);class o{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){return!!e&&"method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers}clone(){var e;let t=new o({...this,headers:{...this.headers}});return t.query&&(t.query=Object.keys(e=t.query).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})),t}}class a{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){return!!e&&"number"==typeof e.statusCode&&"object"==typeof e.headers}}},94248:(e,t,r)=>{r.d(t,{Rk:()=>c,bV:()=>l,o7:()=>p,pK:()=>d,iH:()=>f});let n=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],i=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],o=["TimeoutError","RequestTimeout","RequestTimeoutException"],a=[500,502,503,504],s=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],l=e=>void 0!==e.$retryable,c=e=>n.includes(e.name),u=e=>e.$metadata?.clockSkewCorrected,d=e=>e.$metadata?.httpStatusCode===429||i.includes(e.name)||e.$retryable?.throttling==!0,f=e=>u(e)||o.includes(e.name)||s.includes(e?.code||"")||a.includes(e.$metadata?.httpStatusCode||0),p=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;if(500<=t&&t<=599&&!f(e))return!0}return!1}},39435:(e,t,r)=>{r.d(t,{Ck:()=>k,TH:()=>l,Jl:()=>c,Py:()=>d,gH:()=>h,Zl:()=>$,G:()=>P,MX:()=>I});var n=r(22037),i=r(71017);let o={},a=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",s=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:s=`C:${i.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${s}${r}`;let l=a();return o[l]||(o[l]=(0,n.homedir)()),o[l]},l="AWS_PROFILE",c=e=>e.profile||process.env[l]||"default";var u=r(6113);let d=e=>{let t=(0,u.createHash)("sha1").update(e).digest("hex");return(0,i.join)(s(),".aws","sso","cache",`${t}.json`)};var f=r(57147);let{readFile:p}=f.promises,h=async e=>{let t=d(e);return JSON.parse(await p(t,"utf8"))};var y=r(28391);let g=e=>Object.entries(e).filter(([e])=>{let t=e.indexOf(k);return -1!==t&&Object.values(y.I).includes(e.substring(0,t))}).reduce((e,[t,r])=>{let n=t.indexOf(k);return e[t.substring(0,n)===y.I.PROFILE?t.substring(n+1):t]=r,e},{...e.default&&{default:e.default}}),m=()=>process.env.AWS_CONFIG_FILE||(0,i.join)(s(),".aws","config"),w=()=>process.env.AWS_SHARED_CREDENTIALS_FILE||(0,i.join)(s(),".aws","credentials"),b=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,v=["__proto__","profile __proto__"],S=e=>{let t,r;let n={};for(let i of e.split(/\r?\n/)){let e=i.split(/(^|\s)[;#]/)[0].trim();if("["===e[0]&&"]"===e[e.length-1]){t=void 0,r=void 0;let n=e.substring(1,e.length-1),i=b.exec(n);if(i){let[,e,,r]=i;Object.values(y.I).includes(e)&&(t=[e,r].join(k))}else t=n;if(v.includes(n))throw Error(`Found invalid profile name "${n}"`)}else if(t){let o=e.indexOf("=");if(![0,-1].includes(o)){let[a,s]=[e.substring(0,o).trim(),e.substring(o+1).trim()];if(""===s)r=a;else{r&&i.trimStart()===i&&(r=void 0),n[t]=n[t]||{};let e=r?[r,a].join(k):a;n[t][e]=s}}}}return n},{readFile:E}=f.promises,A={},x=(e,t)=>((!A[e]||t?.ignoreCache)&&(A[e]=E(e,"utf8")),A[e]),T=()=>({}),k=".",$=async(e={})=>{let{filepath:t=w(),configFilepath:r=m()}=e,n=await Promise.all([x(r,{ignoreCache:e.ignoreCache}).then(S).then(g).catch(T),x(t,{ignoreCache:e.ignoreCache}).then(S).catch(T)]);return{configFile:n[0],credentialsFile:n[1]}},R=e=>Object.entries(e).filter(([e])=>e.startsWith(y.I.SSO_SESSION+k)).reduce((e,[t,r])=>({...e,[t.substring(t.indexOf(k)+1)]:r}),{}),C=()=>({}),P=async(e={})=>x(e.configFilepath??m()).then(S).then(R).catch(C),O=(...e)=>{let t={};for(let r of e)for(let[e,n]of Object.entries(r))void 0!==t[e]?Object.assign(t[e],n):t[e]=n;return t},I=async e=>{let t=await $(e);return O(t.configFile,t.credentialsFile)}},39539:(e,t,r)=>{r.d(t,{KU:()=>c,mY:()=>p,vk:()=>n,oc:()=>y,sI:()=>Z,F3:()=>eb,Wg:()=>d,to:()=>J,H_:()=>er,u$:()=>v,CE:()=>T,Wh:()=>k,pY:()=>$,jc:()=>ec,kE:()=>es,sT:()=>eu,jv:()=>ee,UI:()=>ef,uj:()=>M,aH:()=>L,SQ:()=>el,Is:()=>ew,AF:()=>O,qn:()=>ep,PC:()=>X});class n{trace(){}debug(){}info(){}warn(){}error(){}}let i=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let e of t)r.push(e);return r},o=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,a=()=>{let e=[],t=[],r=!1,n=new Set,c=e=>e.sort((e,t)=>s[t.step]-s[e.step]||l[t.priority||"normal"]-l[e.priority||"normal"]),u=r=>{let o=!1,a=e=>{let t=i(e.name,e.aliases);if(t.includes(r)){for(let e of(o=!0,t))n.delete(e);return!1}return!0};return e=e.filter(a),t=t.filter(a),o},d=r=>{let o=!1,a=e=>{if(e.middleware===r){for(let t of(o=!0,i(e.name,e.aliases)))n.delete(t);return!1}return!0};return e=e.filter(a),t=t.filter(a),o},f=r=>(e.forEach(e=>{r.add(e.middleware,{...e})}),t.forEach(e=>{r.addRelativeTo(e.middleware,{...e})}),r.identifyOnResolve?.(y.identifyOnResolve()),r),p=e=>{let t=[];return e.before.forEach(e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...p(e))}),t.push(e),e.after.reverse().forEach(e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...p(e))}),t},h=(r=!1)=>{let n=[],a=[],s={};return e.forEach(e=>{let t={...e,before:[],after:[]};for(let e of i(t.name,t.aliases))s[e]=t;n.push(t)}),t.forEach(e=>{let t={...e,before:[],after:[]};for(let e of i(t.name,t.aliases))s[e]=t;a.push(t)}),a.forEach(e=>{if(e.toMiddleware){let t=s[e.toMiddleware];if(void 0===t){if(r)return;throw Error(`${e.toMiddleware} is not found when adding ${o(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),c(n).map(p).reduce((e,t)=>(e.push(...t),e),[])},y={add:(t,r={})=>{let{name:a,override:s,aliases:l}=r,c={step:"initialize",priority:"normal",middleware:t,...r},u=i(a,l);if(u.length>0){if(u.some(e=>n.has(e))){if(!s)throw Error(`Duplicate middleware name '${o(a,l)}'`);for(let t of u){let r=e.findIndex(e=>e.name===t||e.aliases?.some(e=>e===t));if(-1===r)continue;let n=e[r];if(n.step!==c.step||c.priority!==n.priority)throw Error(`"${o(n.name,n.aliases)}" middleware with ${n.priority} priority in ${n.step} step cannot be overridden by "${o(a,l)}" middleware with ${c.priority} priority in ${c.step} step.`);e.splice(r,1)}}for(let e of u)n.add(e)}e.push(c)},addRelativeTo:(e,r)=>{let{name:a,override:s,aliases:l}=r,c={middleware:e,...r},u=i(a,l);if(u.length>0){if(u.some(e=>n.has(e))){if(!s)throw Error(`Duplicate middleware name '${o(a,l)}'`);for(let e of u){let r=t.findIndex(t=>t.name===e||t.aliases?.some(t=>t===e));if(-1===r)continue;let n=t[r];if(n.toMiddleware!==c.toMiddleware||n.relation!==c.relation)throw Error(`"${o(n.name,n.aliases)}" middleware ${n.relation} "${n.toMiddleware}" middleware cannot be overridden by "${o(a,l)}" middleware ${c.relation} "${c.toMiddleware}" middleware.`);t.splice(r,1)}}for(let e of u)n.add(e)}t.push(c)},clone:()=>f(a()),use:e=>{e.applyToStack(y)},remove:e=>"string"==typeof e?u(e):d(e),removeByTag:r=>{let o=!1,a=e=>{let{tags:t,name:a,aliases:s}=e;if(t&&t.includes(r)){for(let e of i(a,s))n.delete(e);return o=!0,!1}return!0};return e=e.filter(a),t=t.filter(a),o},concat:e=>{let t=f(a());return t.use(e),t.identifyOnResolve(r||t.identifyOnResolve()||(e.identifyOnResolve?.()??!1)),t},applyToStack:f,identify:()=>h(!0).map(e=>{let t=e.step??e.relation+" "+e.toMiddleware;return o(e.name,e.aliases)+" - "+t}),identifyOnResolve:e=>("boolean"==typeof e&&(r=e),r),resolve:(e,t)=>{for(let r of h().map(e=>e.middleware).reverse())e=r(e,t);return r&&console.log(y.identify()),e}};return y},s={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},l={high:3,normal:2,low:1};class c{constructor(e){this.middlewareStack=a(),this.config=e}send(e,t,r){let n="function"==typeof t?t:r,i=e.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof t?t:void 0);if(!n)return i(e).then(e=>e.output);i(e).then(e=>n(null,e.output),e=>n(e)).catch(()=>{})}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}var u=r(37404);let d=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return u.HE.mutate(e);if(!e)return u.HE.mutate(new Uint8Array);let r=t.streamCollector(e);return u.HE.mutate(await r)};var f=r(28391);class p{constructor(){this.middlewareStack=a()}static classBuilder(){return new h}resolveMiddlewareWithContext(e,t,r,{middlewareFn:n,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:s,smithyContext:l,additionalContext:c,CommandCtor:u}){for(let i of n.bind(this)(u,e,t,r))this.middlewareStack.use(i);let d=e.concat(this.middlewareStack),{logger:p}=t,h={logger:p,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:s,[f.zK]:{...l},...c},{requestHandler:y}=t;return d.resolve(e=>y.handle(e.request,r||{}),h)}}class h{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,r={}){return this._smithyContext={service:e,operation:t,...r},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=e=>e,t=e=>e){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){let e;let t=this;return e=class extends p{static getEndpointParameterInstructions(){return t._ep}constructor(...[e]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=e??{},t._init(this)}resolveMiddleware(r,n,i){return this.resolveMiddlewareWithContext(r,n,i,{CommandCtor:e,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}let y="***SensitiveInformation***",g=e=>{if(null!=e){if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&N.warn(U(`Expected number but observed string: ${e}`)),t}if("number"==typeof e)return e;throw TypeError(`Expected number, got ${typeof e}: ${e}`)}},m=Math.ceil(17014118346046923e22*(2-11920928955078125e-23)),w=e=>{let t=g(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>m)throw TypeError(`Expected 32-bit float, got ${e}`);return t},b=e=>{if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw TypeError(`Expected integer, got ${typeof e}: ${e}`)}},v=e=>A(e,32),S=e=>A(e,16),E=e=>A(e,8),A=(e,t)=>{let r=b(e);if(void 0!==r&&x(r,t)!==r)throw TypeError(`Expected ${t}-bit integer, got ${e}`);return r},x=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},T=(e,t)=>{if(null==e){if(t)throw TypeError(`Expected a non-null value for ${t}`);throw TypeError("Expected a non-null value")}return e},k=e=>{if(null==e)return;if("object"==typeof e&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw TypeError(`Expected object, got ${t}: ${e}`)},$=e=>{if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return N.warn(U(`Expected string, got ${typeof e}: ${e}`)),String(e);throw TypeError(`Expected string, got ${typeof e}: ${e}`)}},R=e=>"string"==typeof e?w(P(e)):w(e),C=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,P=e=>{let t=e.match(C);if(null===t||t[0].length!==e.length)throw TypeError("Expected real number, got implicit NaN");return parseFloat(e)},O=e=>"string"==typeof e?v(P(e)):v(e),I=e=>"string"==typeof e?S(P(e)):S(e),_=e=>"string"==typeof e?E(P(e)):E(e),U=e=>String(TypeError(e).stack||e).split("\n").slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join("\n"),N={warn:console.warn},j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],D=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),M=e=>{if(null==e)return;if("string"!=typeof e)throw TypeError("RFC-3339 date-times must be expressed as strings");let t=D.exec(e);if(!t)throw TypeError("Invalid RFC-3339 date-time value");let[r,n,i,o,a,s,l,c]=t;return F(I(K(n)),W(i,"month",1,12),W(o,"day",1,31),{hours:a,minutes:s,seconds:l,fractionalMilliseconds:c})},q=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),L=e=>{if(null==e)return;if("string"!=typeof e)throw TypeError("RFC-3339 date-times must be expressed as strings");let t=q.exec(e);if(!t)throw TypeError("Invalid RFC-3339 date-time value");let[r,n,i,o,a,s,l,c,u]=t,d=F(I(K(n)),W(i,"month",1,12),W(o,"day",1,31),{hours:a,minutes:s,seconds:l,fractionalMilliseconds:c});return"Z"!=u.toUpperCase()&&d.setTime(d.getTime()-G(u)),d},F=(e,t,r,n)=>{let i=t-1;return B(e,i,r),new Date(Date.UTC(e,i,r,W(n.hours,"hour",0,23),W(n.minutes,"minute",0,59),W(n.seconds,"seconds",0,60),V(n.fractionalMilliseconds)))},H=[31,28,31,30,31,30,31,31,30,31,30,31],B=(e,t,r)=>{let n=H[t];if(1===t&&z(e)&&(n=29),r>n)throw TypeError(`Invalid day for ${j[t]} in ${e}: ${r}`)},z=e=>e%4==0&&(e%100!=0||e%400==0),W=(e,t,r,n)=>{let i=_(K(e));if(i<r||i>n)throw TypeError(`${t} must be between ${r} and ${n}, inclusive`);return i},V=e=>null==e?0:1e3*R("0."+e),G=e=>{let t=e[0],r=1;if("+"==t)r=1;else if("-"==t)r=-1;else throw TypeError(`Offset direction, ${t}, must be "+" or "-"`);return r*(60*Number(e.substring(1,3))+Number(e.substring(4,6)))*6e4},K=e=>{let t=0;for(;t<e.length-1&&"0"===e.charAt(t);)t++;return 0===t?e:e.slice(t)};class Z extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Z.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}}let J=(e,t={})=>{Object.entries(t).filter(([,e])=>void 0!==e).forEach(([t,r])=>{(void 0==e[t]||""===e[t])&&(e[t]=r)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},Y=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let i=Q(e),o=i.httpStatusCode?i.httpStatusCode+"":void 0;throw J(new r({name:t?.code||t?.Code||n||o||"UnknownError",$fault:"client",$metadata:i}),t)},X=e=>({output:t,parsedBody:r,errorCode:n})=>{Y({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},Q=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),ee=e=>{switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},et=!1,er=e=>{e&&!et&&14>parseInt(e.substring(1,e.indexOf(".")))&&(et=!0)},en=e=>{let t=[];for(let r in f.f3){let n=f.f3[r];void 0!==e[n]&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(e){this._checksumAlgorithms.push(e)},checksumAlgorithms(){return this._checksumAlgorithms}}},ei=e=>{let t={};return e.checksumAlgorithms().forEach(e=>{t[e.algorithmId()]=e.checksumConstructor()}),t},eo=e=>{let t=e.retryStrategy;return{setRetryStrategy(e){t=e},retryStrategy:()=>t}},ea=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},es=e=>({...en(e),...eo(e)}),el=e=>({...ei(e),...ea(e)});function ec(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}let eu=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&void 0!==e[r][t]?e[r]=e[r][t]:"object"==typeof e[r]&&null!==e[r]&&(e[r]=eu(e[r]));return e},ed=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};function ef(e,t,r){let n,i;if(void 0===t&&void 0===r)n={},i=e;else{if(n=e,"function"==typeof t)return eh(n,t,i=r);i=t}for(let e of Object.keys(i)){if(!Array.isArray(i[e])){n[e]=i[e];continue}ey(n,null,i,e)}return n}ed.prototype=Object.create(String.prototype,{constructor:{value:ed,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(ed,String);let ep=(e,t)=>{let r={};for(let n in t)ey(r,e,t,n);return r},eh=(e,t,r)=>ef(e,Object.entries(r).reduce((e,[r,n])=>(Array.isArray(n)?e[r]=n:"function"==typeof n?e[r]=[t,n()]:e[r]=[t,n],e),{})),ey=(e,t,r,n)=>{if(null!==t){let i=r[n];"function"==typeof i&&(i=[,i]);let[o=eg,a=em,s=n]=i;("function"==typeof o&&o(t[s])||"function"!=typeof o&&o)&&(e[n]=a(t[s]));return}let[i,o]=r[n];if("function"==typeof o){let t;let r=void 0===i&&null!=(t=o()),a="function"==typeof i&&!!i(void 0)||"function"!=typeof i&&!!i;r?e[n]=t:a&&(e[n]=o())}else{let t=void 0===i&&null!=o,r="function"==typeof i&&!!i(o)||"function"!=typeof i&&!!i;(t||r)&&(e[n]=o)}},eg=e=>null!=e,em=e=>e,ew=(e,t,r,n,i,o)=>{if(null!=t&&void 0!==t[r]){let t=n();if(t.length<=0)throw Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(i,o?t.split("/").map(e=>ec(e)).join("/"):ec(t))}else throw Error("No value provided for input HTTP label: "+r+".");return e},eb=e=>{if(null==e)return{};if(Array.isArray(e))return e.filter(e=>null!=e).map(eb);if("object"==typeof e){let t={};for(let r of Object.keys(e))null!=e[r]&&(t[r]=eb(e[r]));return t}return e}},28391:(e,t,r)=>{var n,i,o,a,s,l,c;r.d(t,{f3:()=>a,cj:()=>o,I:()=>l,zK:()=>u}),function(e){e.HEADER="header",e.QUERY="query"}(n||(n={})),function(e){e.HEADER="header",e.QUERY="query"}(i||(i={})),function(e){e.HTTP="http",e.HTTPS="https"}(o||(o={})),function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"}(a||(a={})),function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"}(s||(s={}));let u="__smithy_context";(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(l||(l={})),function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"}(c||(c={}))},96636:(e,t,r)=>{r.d(t,{e:()=>n});let n=e=>{let t;if("string"==typeof e)return n(new URL(e));let{hostname:r,pathname:i,port:o,protocol:a,search:s}=e;return s&&(t=function(e){let t={};if(e=e.replace(/^\?/,""))for(let r of e.split("&")){let[e,n=null]=r.split("=");e=decodeURIComponent(e),n&&(n=decodeURIComponent(n)),e in t?Array.isArray(t[e])?t[e].push(n):t[e]=[t[e],n]:t[e]=n}return t}(s)),{hostname:r,port:o?parseInt(o):void 0,protocol:a,path:i,query:t}}},55898:(e,t,r)=>{r.d(t,{G:()=>o,s:()=>s});var n=r(63234);let i=/^[A-Za-z0-9+/]*={0,2}$/,o=e=>{if(3*e.length%4!=0)throw TypeError("Incorrect padding on base64 string.");if(!i.exec(e))throw TypeError("Invalid base64 string.");let t=(0,n.m)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var a=r(13571);let s=e=>{let t;if("object"!=typeof(t="string"==typeof e?(0,a.$x)(e):e)||"number"!=typeof t.byteOffset||"number"!=typeof t.byteLength)throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,n.g)(t.buffer,t.byteOffset,t.byteLength).toString("base64")}},72282:(e,t,r)=>{r.d(t,{W:()=>i});var n=r(57147);let i=e=>{if(!e)return 0;if("string"==typeof e)return Buffer.byteLength(e);if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;if("number"==typeof e.start&&"number"==typeof e.end)return e.end+1-e.start;if("string"==typeof e.path||Buffer.isBuffer(e.path))return(0,n.lstatSync)(e.path).size;if("number"==typeof e.fd)return(0,n.fstatSync)(e.fd).size;throw Error(`Body Length computation failed for ${e}`)}},63234:(e,t,r)=>{r.d(t,{g:()=>o,m:()=>a});var n=r(20739),i=r(14300);let o=(e,t=0,r=e.byteLength-t)=>{if(!(0,n.e)(e))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return i.Buffer.from(e,t,r)},a=(e,t)=>{if("string"!=typeof e)throw TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?i.Buffer.from(e,t):i.Buffer.from(e)}},46608:(e,t,r)=>{r.d(t,{j:()=>u});var n=r(83311),i=r(1071),o=r(97110);let a="AWS_REGION",s="AWS_DEFAULT_REGION",l=["in-region","cross-region","mobile","standard","legacy"],c={environmentVariableSelector:e=>e.AWS_DEFAULTS_MODE,configFileSelector:e=>e.defaults_mode,default:"legacy"},u=({region:e=(0,i.M)(n._c),defaultsMode:t=(0,i.M)(c)}={})=>(0,o.HP)(async()=>{let r="function"==typeof t?await t():t;switch(r?.toLowerCase()){case"auto":return d(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw Error(`Invalid parameter for "defaultsMode", expect ${l.join(", ")}, got ${r}`)}}),d=async e=>{if(e){let t="function"==typeof e?await e():e,r=await f();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},f=async()=>{if(process.env.AWS_EXECUTION_ENV&&(process.env[a]||process.env[s]))return process.env[a]??process.env[s];if(!process.env.AWS_EC2_METADATA_DISABLED)try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await r.e(9021).then(r.bind(r,89021)),n=await e();return(await t({...n,path:"/latest/meta-data/placement/region"})).toString()}catch(e){}}},46293:(e,t,r)=>{r.d(t,{DY:()=>s,dY:()=>i,IA:()=>a,B1:()=>P});let n=RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),i=e=>n.test(e)||e.startsWith("[")&&e.endsWith("]"),o=RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),a=(e,t=!1)=>{if(!t)return o.test(e);for(let t of e.split("."))if(!a(t))return!1;return!0},s={},l="endpoints";function c(e){return"object"!=typeof e||null==e?e:"ref"in e?`$${c(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(c).join(", ")})`:JSON.stringify(e,null,2)}class u extends Error{constructor(e){super(e),this.name="EndpointError"}}let d=e=>{let t=e.split("."),r=[];for(let n of t){let t=n.indexOf("[");if(-1!==t){if(n.indexOf("]")!==n.length-1)throw new u(`Path: '${e}' does not end with ']'`);let i=n.slice(t+1,-1);if(Number.isNaN(parseInt(i)))throw new u(`Invalid array index: '${i}' in path: '${e}'`);0!==t&&r.push(n.slice(0,t)),r.push(i)}else r.push(n)}return r},f=(e,t)=>d(t).reduce((r,n)=>{if("object"!=typeof r)throw new u(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var p=r(28391);let h={[p.cj.HTTP]:80,[p.cj.HTTPS]:443},y={booleanEquals:(e,t)=>e===t,getAttr:f,isSet:e=>null!=e,isValidHostLabel:a,not:e=>!e,parseURL:e=>{let t=(()=>{try{if(e instanceof URL)return e;if("object"==typeof e&&"hostname"in e){let{hostname:t,port:r,protocol:n="",path:i="",query:o={}}=e,a=new URL(`${n}//${t}${r?`:${r}`:""}${i}`);return a.search=Object.entries(o).map(([e,t])=>`${e}=${t}`).join("&"),a}return new URL(e)}catch(e){return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:a,protocol:s,search:l}=t;if(l)return null;let c=s.slice(0,-1);if(!Object.values(p.cj).includes(c))return null;let u=i(o),d=r.includes(`${n}:${h[c]}`)||"string"==typeof e&&e.includes(`${n}:${h[c]}`),f=`${n}${d?`:${h[c]}`:""}`;return{scheme:c,authority:f,path:a,normalizedPath:a.endsWith("/")?a:`${a}/`,isIp:u}},stringEquals:(e,t)=>e===t,substring:(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},g=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},i=0;for(;i<e.length;){let t=e.indexOf("{",i);if(-1===t){r.push(e.slice(i));break}r.push(e.slice(i,t));let o=e.indexOf("}",t);if(-1===o){r.push(e.slice(t));break}"{"===e[t+1]&&"}"===e[o+1]&&(r.push(e.slice(t+1,o)),i=o+2);let a=e.substring(t+1,o);if(a.includes("#")){let[e,t]=a.split("#");r.push(f(n[e],t))}else r.push(n[a]);i=o+1}return r.join("")},m=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],w=(e,t,r)=>{if("string"==typeof e)return g(e,r);if(e.fn)return b(e,r);if(e.ref)return m(e,r);throw new u(`'${t}': ${String(e)} is not a string, function or reference.`)},b=({fn:e,argv:t},r)=>{let n=t.map(e=>["boolean","number"].includes(typeof e)?e:w(e,"arg",r)),i=e.split(".");return i[0]in s&&null!=i[1]?s[i[0]][i[1]](...n):y[e](...n)},v=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new u(`'${e}' is already defined in Reference Record.`);let n=b(t,r);return r.logger?.debug?.(l,`evaluateCondition: ${c(t)} = ${c(n)}`),{result:""===n||!!n,...null!=e&&{toAssign:{name:e,value:n}}}},S=(e=[],t)=>{let r={};for(let n of e){let{result:e,toAssign:i}=v(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!e)return{result:e};i&&(r[i.name]=i.value,t.logger?.debug?.(l,`assign: ${i.name} := ${c(i.value)}`))}return{result:!0,referenceRecord:r}},E=(e,t)=>Object.entries(e).reduce((e,[r,n])=>({...e,[r]:n.map(e=>{let n=w(e,"Header value entry",t);if("string"!=typeof n)throw new u(`Header '${r}' value '${n}' is not a string`);return n})}),{}),A=(e,t)=>{if(Array.isArray(e))return e.map(e=>A(e,t));switch(typeof e){case"string":return g(e,t);case"object":if(null===e)throw new u(`Unexpected endpoint property: ${e}`);return x(e,t);case"boolean":return e;default:throw new u(`Unexpected endpoint property type: ${typeof e}`)}},x=(e,t)=>Object.entries(e).reduce((e,[r,n])=>({...e,[r]:A(n,t)}),{}),T=(e,t)=>{let r=w(e,"Endpoint URL",t);if("string"==typeof r)try{return new URL(r)}catch(e){throw console.error(`Failed to construct URL with ${r}`,e),e}throw new u(`Endpoint URL must be a string, got ${typeof r}`)},k=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:i,referenceRecord:o}=S(r,t);if(!i)return;let a={...t,referenceRecord:{...t.referenceRecord,...o}},{url:s,properties:u,headers:d}=n;return t.logger?.debug?.(l,`Resolving endpoint from template: ${c(n)}`),{...void 0!=d&&{headers:E(d,a)},...void 0!=u&&{properties:x(u,a)},url:T(s,a)}},$=(e,t)=>{let{conditions:r,error:n}=e,{result:i,referenceRecord:o}=S(r,t);if(i)throw new u(w(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},R=(e,t)=>{let{conditions:r,rules:n}=e,{result:i,referenceRecord:o}=S(r,t);if(i)return C(n,{...t,referenceRecord:{...t.referenceRecord,...o}})},C=(e,t)=>{for(let r of e)if("endpoint"===r.type){let e=k(r,t);if(e)return e}else if("error"===r.type)$(r,t);else if("tree"===r.type){let e=R(r,t);if(e)return e}else throw new u(`Unknown endpoint rule: ${r}`);throw new u("Rules evaluation failed")},P=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:i,rules:o}=e;t.logger?.debug?.(`${l} Initial EndpointParams: ${c(r)}`);let a=Object.entries(i).filter(([,e])=>null!=e.default).map(([e,t])=>[e,t.default]);if(a.length>0)for(let[e,t]of a)r[e]=r[e]??t;for(let e of Object.entries(i).filter(([,e])=>e.required).map(([e])=>e))if(null==r[e])throw new u(`Missing required parameter: '${e}'`);let s=C(o,{endpointParams:r,logger:n,referenceRecord:{}});if(t.endpointParams?.Endpoint)try{let{protocol:e,port:r}=new URL(t.endpointParams.Endpoint);s.url.protocol=e,s.url.port=r}catch(e){}return t.logger?.debug?.(`${l} Resolved endpoint: ${c(s)}`),s}},73382:(e,t,r)=>{r.d(t,{H:()=>o,N:()=>a});let n={},i={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),n[e]=t,i[t]=e}function o(e){if(e.length%2!=0)throw Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in i)t[r/2]=i[n];else throw Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function a(e){let t="";for(let r=0;r<e.byteLength;r++)t+=n[e[r]];return t}},39701:(e,t,r)=>{r.d(t,{J:()=>i,$:()=>o});var n=r(28391);let i=e=>e[n.zK]||(e[n.zK]={}),o=e=>{if("function"==typeof e)return e;let t=Promise.resolve(e);return()=>t}},96602:(e,t,r)=>{r.d(t,{AY:()=>v,J:()=>n,Fe:()=>l,CA:()=>i,ok:()=>s,E5:()=>d,lk:()=>y,sn:()=>c,gZ:()=>h,r5:()=>g,RM:()=>f,Ul:()=>o,Uz:()=>b,sb:()=>u,Y2:()=>p}),function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(o||(o={}));let n=3,i=o.STANDARD;var o,a=r(94248);class s{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(e=>setTimeout(e,t))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),(0,a.pK)(e)){let e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());let r=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=Math.floor(2*this.getCurrentTimeInSeconds())/2;if(this.requestCount++,e>this.lastTxRateBucket){let t=this.requestCount/(e-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(t*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=e}}getPrecise(e){return parseFloat(e.toFixed(8))}}let l=100,c=2e4,u=500,d=500,f=5,p=10,h=1,y="amz-sdk-invocation-id",g="amz-sdk-request",m=()=>{let e=l;return{computeNextBackoffDelay:t=>Math.floor(Math.min(c,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}},w=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(c,e),getRetryCost:()=>r});class b{constructor(e){this.maxAttempts=e,this.mode=o.STANDARD,this.capacity=d,this.retryBackoffStrategy=m(),this.maxAttemptsProvider="function"==typeof e?e:async()=>e}async acquireInitialRetryToken(e){return w({retryDelay:l,retryCount:0})}async refreshRetryTokenForRetry(e,t){let r=await this.getMaxAttempts();if(this.shouldRetry(e,t,r)){let r=t.errorType;this.retryBackoffStrategy.setDelayBase("THROTTLING"===r?u:l);let n=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),i=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,n):n,o=this.getCapacityCost(r);return this.capacity-=o,w({retryDelay:i,retryCount:e.getRetryCount()+1,retryCost:o})}throw Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(d,this.capacity+(e.getRetryCost()??h))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(e){return console.warn(`Max attempts provider could not resolve. Using default of ${n}`),n}}shouldRetry(e,t,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return"TRANSIENT"===e?p:f}isRetryableError(e){return"THROTTLING"===e||"TRANSIENT"===e}}class v{constructor(e,t){this.maxAttemptsProvider=e,this.mode=o.ADAPTIVE;let{rateLimiter:r}=t??{};this.rateLimiter=r??new s,this.standardRetryStrategy=new b(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}},37404:(e,t,r)=>{r.d(t,{HE:()=>o,Ou:()=>d});var n=r(55898),i=r(13571);class o extends Uint8Array{static fromString(e,t="utf-8"){if("string"==typeof e)return"base64"===t?o.mutate((0,n.G)(e)):o.mutate((0,i.$x)(e));throw Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,o.prototype),e}transformToString(e="utf-8"){return function(e,t="utf-8"){return"base64"===t?(0,n.s)(e):(0,i.GZ)(e)}(this,e)}}var a=r(12781),s=r(60660),l=r(63234),c=r(73837);let u="The stream has already been transformed.",d=e=>{if(!(e instanceof a.Readable)){let t=e?.__proto__?.constructor?.name||e;throw Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${t}`)}let t=!1,r=async()=>{if(t)throw Error(u);return t=!0,await (0,s.CF)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async e=>{let t=await r();return void 0===e||Buffer.isEncoding(e)?(0,l.g)(t.buffer,t.byteOffset,t.byteLength).toString(e):new c.TextDecoder(e).decode(t)},transformToWebStream:()=>{if(t)throw Error(u);if(null!==e.readableFlowing)throw Error("The stream has been consumed by other callbacks.");if("function"!=typeof a.Readable.toWeb)throw Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return t=!0,a.Readable.toWeb(e)}})}},59064:(e,t,r)=>{r.d(t,{i:()=>n});let n=e=>encodeURIComponent(e).replace(/[!'()*]/g,i),i=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`},13571:(e,t,r)=>{r.d(t,{$x:()=>i,_f:()=>o,GZ:()=>a});var n=r(63234);let i=e=>{let t=(0,n.m)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},o=e=>"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),a=e=>{if("string"==typeof e)return e;if("object"!=typeof e||"number"!=typeof e.byteOffset||"number"!=typeof e.byteLength)throw Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,n.g)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}},6649:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(6113),i=r.n(n);let o=new Uint8Array(256),a=o.length;function s(){return a>o.length-16&&(i().randomFillSync(o),a=0),o.slice(a,a+=16)}},16099:(e,t,r)=>{r.d(t,{S:()=>o,Z:()=>a});var n=r(30900);let i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function o(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}let a=function(e,t=0){let r=o(e,t);if(!(0,n.Z)(r))throw TypeError("Stringified UUID is invalid");return r}},56573:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(6113);let i={randomUUID:r.n(n)().randomUUID};var o=r(6649),a=r(16099);let s=function(e,t,r){if(i.randomUUID&&!t&&!e)return i.randomUUID();let n=(e=e||{}).random||(e.rng||o.Z)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return(0,a.S)(n)}},30900:(e,t,r)=>{r.d(t,{Z:()=>i});let n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,i=function(e){return"string"==typeof e&&n.test(e)}},87320:(e,t,r)=>{r.d(t,{q:()=>i});var n=r(72223);let i=(e,t)=>(0,n.b9)(t??"gpt-4").encode(e).length??0}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[9276,1203,50,3306,6292,2223,464],()=>r(88081));module.exports=n})();