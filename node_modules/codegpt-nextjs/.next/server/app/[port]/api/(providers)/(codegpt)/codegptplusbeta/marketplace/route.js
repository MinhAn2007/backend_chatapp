"use strict";(()=>{var e={};e.id=9400,e.ids=[9400],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},76224:e=>{e.exports=require("tty")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},1693:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>x});var a={};s.r(a),s.d(a,{POST:()=>d});var r=s(49303),o=s(88716),n=s(60670),i=s(74506),p=s(20021),c=s(56342),u=s(80050);async function d(e){let{agentId:t}=await e.json(),s=p.Xd.secrets?.["CodeGPT Plus Beta_orgId"],a=await (0,i.Z)();if(!a)return Response.json("Please login to use this feature.",{status:428});let r={Authorization:`Bearer ${a||p.Xd.apiKey||""}`,"Content-Type":"application/json",...s?{"CodeGPT-Org-Id":s}:{},"Access-Control-Allow-Origin":"*"},o=await u.Z.post(`https://api.codegpt.co/api/v1/agents/marketplace-favorites/${t}`,{},{headers:r});return await (0,c.q)({eventName:"Marketplace Favorite",provider:"CodeGPT Plus Beta",model:t,statusCode:o.status}),Response.json({status:o.status,data:o.data})}let l=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/[port]/api/(providers)/(codegpt)/codegptplusbeta/marketplace/route",pathname:"/[port]/api/codegptplusbeta/marketplace",filename:"route",bundlePath:"app/[port]/api/(providers)/(codegpt)/codegptplusbeta/marketplace/route"},resolvedPagePath:"/Users/maol/WebstormProjects/Trabajo/codegpt-nextjs/app/[port]/api/(providers)/(codegpt)/codegptplusbeta/marketplace/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:x,serverHooks:m}=l,h="/[port]/api/(providers)/(codegpt)/codegptplusbeta/marketplace/route";function v(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:x})}},74506:(e,t,s)=>{s.d(t,{Z:()=>i});var a=s(20021),r=s(50249),o=s(33984),n=s(71615);async function i(){let e=a.Xd?.secrets?.vicunaSession,t=e?JSON.parse(e):void 0,s=t?.accessToken;if(s&&parseInt(t.expiresAt+"000")<Date.now()){let e=(0,r.R)((0,n.cookies)()),{data:a,error:i}=await e.auth.refreshSession({refresh_token:t.refreshToken});i?(console.log("vicu\xf1a refreshSession error: ",i.message),(i.message.includes("Refresh Token Not Found")||i.message.includes("Already Used"))&&await (0,o.j)({accessToken:"",refreshToken:"",expiresAt:""})):(await (0,o.j)({accessToken:a.session.access_token,refreshToken:a.session.refresh_token,expiresAt:String(a.session.expires_at)}),s=a.session.access_token)}return s}},20021:(e,t,s)=>{s.d(t,{Xd:()=>r,ed:()=>o,vx:()=>a});let a=()=>{let{headers:e}=s(71615),t=e().get("referer").split("/")[3];return console.log({extensionUrl:`http://localhost:${t}`}),`http://localhost:${t}`},r={},o=e=>{r=e}},50249:(e,t,s)=>{s.d(t,{R:()=>n});var a=s(93306);let r="https://auth.codegpt.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJyb3h1dnNyc2RieGFjb2twcmF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTU0OTEyNzgsImV4cCI6MjAxMTA2NzI3OH0.fyyxVq2c2eLIExMQEUxP8wNoyY2UumBrfN5So16TCno";(0,a.AY)(r,o);let n=e=>(0,a.lx)(r,o,{cookies:{get:t=>e.get(t)?.value,set(t,s,a){try{e.set({name:t,value:s,...a})}catch(e){}},remove(t,s){try{e.set({name:t,value:"",...s})}catch(e){}}}})},56342:(e,t,s)=>{s.d(t,{q:()=>n});var a=s(74506),r=s(94750),o=s(80050);let n=async({eventName:e,provider:t,model:s,promptTokens:a,completionTokens:o,totalTokens:n,target:p,value:c,statusCode:u,object:d,message:l})=>{let[g,x,m,h,v]=await Promise.all([r.Z.getIsAnonymous(),r.Z.getIdeLanguage(),r.Z.getUserId(),r.Z.getVersion(),s?r.Z.getLanguage():""]);i({event:e||"Chat",data:{...{userType:"false"===g?"anonymous":"registered",...t?{provider:t}:{},...s?{model:s}:{},...a?{prompt_tokens:a}:{},...o?{completion_tokens:o}:{},...n?{total_tokens:n}:{},...p?{target:p}:{},...c?{value:c}:{},...d?{object:d}:{},...l?{message:l}:{},...v?{language_code:v}:{},language:x,source:"vscode",codeGPTVersion:h},...u?{statusCode:u}:{}},userId:m})};async function i({event:e,data:t,userId:s}){let r=[{event:e,properties:{...t,time:Date.now(),distinct_id:s,$insert_id:crypto.randomUUID()}}],n=await (0,a.Z)();await o.Z.post("https://api.codegpt.co/api/v1/telemetry",r,{headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}}}).catch(e=>{console.error("Error sending telemetry",e),console.log({status:e.response?.status,data:e.response?.data})})}},33984:(e,t,s)=>{s.d(t,{j:()=>n});var a=s(50249),r=s(80050),o=s(71615);let n=({accessToken:e,refreshToken:t,expiresAt:s})=>{console.log("SET VICUNA SESSION"),e||t||s||(0,a.R)((0,o.cookies)()).auth.signOut();for(let a=54113;a<=54130;a++){console.log(`Trying port ${a}`);try{return r.Z.post(`http://localhost:${a}/vicunaSession`,{accessToken:e,refreshToken:t,expiresAt:s}).then(e=>e.data)}catch(e){return console.log(`Port ${a} is closed or not responding.`),null}}}},94750:(e,t,s)=>{s.d(t,{Z:()=>o});var a=s(20021),r=s(80050);let o={context:{secrets:{delete:async e=>await r.Z.delete(`${(0,a.vx)()}/secret/${e}`),store:async(e,t)=>await r.Z.post(`${(0,a.vx)()}/secrets`,{key:e,value:t})},globalState:{update:async(e,t)=>await r.Z.post(`${(0,a.vx)()}/globalState`,{key:e,value:t})}},window:{showErrorMessage:async e=>await r.Z.post(`${(0,a.vx)()}/showErrorMessage`,{message:e}),showWarningMessage:async e=>await r.Z.post(`${(0,a.vx)()}/showWarningMessage`,{message:e}),showInformationMessage:async e=>await r.Z.post(`${(0,a.vx)()}/showInformationMessage`,{message:e})},commands:{executeCommand:async e=>await r.Z.post(`${(0,a.vx)()}/executeCommand`,{command:e})},workspace:{getConfiguration:()=>({update:async(e,t)=>await r.Z.post(`${(0,a.vx)()}/config`,{key:e,value:t})})},newFileWithCode:async e=>await r.Z.post(`${(0,a.vx)()}/newFileWithCode`,{code:e}),insertCode:async e=>await r.Z.post(`${(0,a.vx)()}/insertCode`,{code:e}),getSelectedText:async()=>(await r.Z.get(`${(0,a.vx)()}/getSelectedText`)).data,getLanguage:async()=>{let e=await r.Z.get(`${(0,a.vx)()}/language`);return e.data.includes("react")?"jsx":e.data},getIdeLanguage:async()=>(await r.Z.get(`${(0,a.vx)()}/ideLanguage`)).data,getUserId:async()=>(await r.Z.get(`${(0,a.vx)()}/userId`)).data,getVersion:async()=>(await r.Z.get(`${(0,a.vx)()}/version`)).data,getIsAnonymous:async()=>(await r.Z.get(`${(0,a.vx)()}/isAnonymous`)).data}}};var t=require("../../../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9276,1203,50,3306],()=>s(1693));module.exports=a})();