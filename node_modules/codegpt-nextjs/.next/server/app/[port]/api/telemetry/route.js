"use strict";(()=>{var e={};e.id=7336,e.ids=[7336],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},76224:e=>{e.exports=require("tty")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},6759:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>u,routeModule:()=>p,serverHooks:()=>d,staticGenerationAsyncStorage:()=>l});var r={};s.r(r),s.d(r,{POST:()=>c});var a=s(49303),o=s(88716),n=s(60670),i=s(56342);async function c(e){let{eventName:t,provider:s,model:r,target:a,value:o,statusCode:n}=await e.json();return await (0,i.q)({eventName:t,provider:s,model:r,target:a,value:o,statusCode:n}),Response.json({status:200})}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/[port]/api/telemetry/route",pathname:"/[port]/api/telemetry",filename:"route",bundlePath:"app/[port]/api/telemetry/route"},resolvedPagePath:"/Users/maol/WebstormProjects/Trabajo/codegpt-nextjs/app/[port]/api/telemetry/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:l,serverHooks:d}=p,g="/[port]/api/telemetry/route";function x(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:l})}},74506:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(20021),a=s(50249),o=s(33984),n=s(71615);async function i(){let e=r.Xd?.secrets?.vicunaSession,t=e?JSON.parse(e):void 0,s=t?.accessToken;if(s&&parseInt(t.expiresAt+"000")<Date.now()){let e=(0,a.R)((0,n.cookies)()),{data:r,error:i}=await e.auth.refreshSession({refresh_token:t.refreshToken});i?(console.log("vicu\xf1a refreshSession error: ",i.message),(i.message.includes("Refresh Token Not Found")||i.message.includes("Already Used"))&&await (0,o.j)({accessToken:"",refreshToken:"",expiresAt:""})):(await (0,o.j)({accessToken:r.session.access_token,refreshToken:r.session.refresh_token,expiresAt:String(r.session.expires_at)}),s=r.session.access_token)}return s}},20021:(e,t,s)=>{s.d(t,{Xd:()=>a,ed:()=>o,vx:()=>r});let r=()=>{let{headers:e}=s(71615),t=e().get("referer").split("/")[3];return console.log({extensionUrl:`http://localhost:${t}`}),`http://localhost:${t}`},a={},o=e=>{a=e}},50249:(e,t,s)=>{s.d(t,{R:()=>n});var r=s(93306);let a="https://auth.codegpt.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJyb3h1dnNyc2RieGFjb2twcmF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTU0OTEyNzgsImV4cCI6MjAxMTA2NzI3OH0.fyyxVq2c2eLIExMQEUxP8wNoyY2UumBrfN5So16TCno";(0,r.AY)(a,o);let n=e=>(0,r.lx)(a,o,{cookies:{get:t=>e.get(t)?.value,set(t,s,r){try{e.set({name:t,value:s,...r})}catch(e){}},remove(t,s){try{e.set({name:t,value:"",...s})}catch(e){}}}})},56342:(e,t,s)=>{s.d(t,{q:()=>n});var r=s(74506),a=s(94750),o=s(80050);let n=async({eventName:e,provider:t,model:s,promptTokens:r,completionTokens:o,totalTokens:n,target:c,value:p,statusCode:u,object:l,message:d})=>{let[g,x,y,m,h]=await Promise.all([a.Z.getIsAnonymous(),a.Z.getIdeLanguage(),a.Z.getUserId(),a.Z.getVersion(),s?a.Z.getLanguage():""]);i({event:e||"Chat",data:{...{userType:"false"===g?"anonymous":"registered",...t?{provider:t}:{},...s?{model:s}:{},...r?{prompt_tokens:r}:{},...o?{completion_tokens:o}:{},...n?{total_tokens:n}:{},...c?{target:c}:{},...p?{value:p}:{},...l?{object:l}:{},...d?{message:d}:{},...h?{language_code:h}:{},language:x,source:"vscode",codeGPTVersion:m},...u?{statusCode:u}:{}},userId:y})};async function i({event:e,data:t,userId:s}){let a=[{event:e,properties:{...t,time:Date.now(),distinct_id:s,$insert_id:crypto.randomUUID()}}],n=await (0,r.Z)();await o.Z.post("https://api.codegpt.co/api/v1/telemetry",a,{headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}}}).catch(e=>{console.error("Error sending telemetry",e),console.log({status:e.response?.status,data:e.response?.data})})}},33984:(e,t,s)=>{s.d(t,{j:()=>n});var r=s(50249),a=s(80050),o=s(71615);let n=({accessToken:e,refreshToken:t,expiresAt:s})=>{console.log("SET VICUNA SESSION"),e||t||s||(0,r.R)((0,o.cookies)()).auth.signOut();for(let r=54113;r<=54130;r++){console.log(`Trying port ${r}`);try{return a.Z.post(`http://localhost:${r}/vicunaSession`,{accessToken:e,refreshToken:t,expiresAt:s}).then(e=>e.data)}catch(e){return console.log(`Port ${r} is closed or not responding.`),null}}}},94750:(e,t,s)=>{s.d(t,{Z:()=>o});var r=s(20021),a=s(80050);let o={context:{secrets:{delete:async e=>await a.Z.delete(`${(0,r.vx)()}/secret/${e}`),store:async(e,t)=>await a.Z.post(`${(0,r.vx)()}/secrets`,{key:e,value:t})},globalState:{update:async(e,t)=>await a.Z.post(`${(0,r.vx)()}/globalState`,{key:e,value:t})}},window:{showErrorMessage:async e=>await a.Z.post(`${(0,r.vx)()}/showErrorMessage`,{message:e}),showWarningMessage:async e=>await a.Z.post(`${(0,r.vx)()}/showWarningMessage`,{message:e}),showInformationMessage:async e=>await a.Z.post(`${(0,r.vx)()}/showInformationMessage`,{message:e})},commands:{executeCommand:async e=>await a.Z.post(`${(0,r.vx)()}/executeCommand`,{command:e})},workspace:{getConfiguration:()=>({update:async(e,t)=>await a.Z.post(`${(0,r.vx)()}/config`,{key:e,value:t})})},newFileWithCode:async e=>await a.Z.post(`${(0,r.vx)()}/newFileWithCode`,{code:e}),insertCode:async e=>await a.Z.post(`${(0,r.vx)()}/insertCode`,{code:e}),getSelectedText:async()=>(await a.Z.get(`${(0,r.vx)()}/getSelectedText`)).data,getLanguage:async()=>{let e=await a.Z.get(`${(0,r.vx)()}/language`);return e.data.includes("react")?"jsx":e.data},getIdeLanguage:async()=>(await a.Z.get(`${(0,r.vx)()}/ideLanguage`)).data,getUserId:async()=>(await a.Z.get(`${(0,r.vx)()}/userId`)).data,getVersion:async()=>(await a.Z.get(`${(0,r.vx)()}/version`)).data,getIsAnonymous:async()=>(await a.Z.get(`${(0,r.vx)()}/isAnonymous`)).data}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9276,1203,50,3306],()=>s(6759));module.exports=r})();