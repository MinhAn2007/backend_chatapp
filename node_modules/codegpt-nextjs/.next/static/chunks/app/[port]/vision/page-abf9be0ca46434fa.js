(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{11022:function(e,t,l){Promise.resolve().then(l.bind(l,3828)),Promise.resolve().then(l.bind(l,32601))},3828:function(e,t,l){"use strict";l.d(t,{default:function(){return _}});var s=l(57437),r=l(27485);function a(e){let{codeOutput:t}=e;return(0,s.jsx)(s.Fragment,{children:(null==t?void 0:t.length)?(0,s.jsx)("div",{className:"w-full overflow-x-auto",children:t}):(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(r.g4,{visible:!0,height:"80",width:"80",color:"#A1A1AA",radius:"9",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClass:""})})})}var n=l(2265),i=l(83533);function o(e){let{codeBlock:t}=e;return(0,s.jsx)(s.Fragment,{children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{id:"LiveProvidersBrother",className:"hidden"}),(0,s.jsxs)(i.nu,{code:t,scope:{useState:n.useState,useRef:n.useRef,useEffect:n.useEffect},children:[(0,s.jsx)(i.IF,{}),(0,s.jsx)(i.i5,{})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(r.CJ,{visible:!0,height:"80",width:"80",color:"#A1A1AA",ariaLabel:"triangle-loading",wrapperStyle:{},wrapperClass:""})})})}var c=l(52639),d=l(69954),u=l(87668),h=l(37393),f=l(82978),p=l(30278),m=l(57129);function x(e){let{handleSubmitC:t,handleInputChange:l,input:r,clear:a,isLoading:i,showStopButton:o,open:x,getRootProps:g,getInputProps:j}=e;return(0,s.jsx)("div",{className:"relative flex w-full flex-col items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"flex w-full flex-col items-center",children:[(0,s.jsx)("div",{className:"mb-4 flex w-full justify-end",children:o&&(0,s.jsx)(h.A,{variant:"faded",className:"text-default-500",color:"default",onClick:a,endContent:(0,s.jsx)(c.Z,{className:"text-default-500",width:16,height:16}),children:"Clear"})}),(0,s.jsx)("form",{className:"relative w-full",onSubmit:t,children:(0,s.jsx)(f.Y,{minRows:1,maxRows:6,autoFocus:!0,value:r,onChange:l,onKeyDown:t,classNames:{innerWrapper:"items-center"},startContent:(0,n.createElement)("div",{...g(),key:"img_button_".concat(i),className:i?"pointer-events-none":""},(0,s.jsxs)(h.A,{isIconOnly:!0,variant:"bordered",onClick:x,size:"lg",isDisabled:i,children:[(0,s.jsx)("input",{...j(),className:"hidden"}),(0,s.jsx)(d.Z,{color:"gray",height:24,width:24})]})),endContent:(0,s.jsxs)(h.A,{color:"primary",type:i?"button":"submit",isDisabled:i,isIconOnly:!0,children:[(0,s.jsx)(u.Z,{height:24,width:24,className:(0,p.cn)({hidden:i})}),(0,s.jsx)("span",{className:(0,p.cn)("",{hidden:!i}),children:(0,s.jsx)(m.Z,{size:32,speed:1.5,color:"pink"})})]}),size:"lg",color:"default",variant:"faded",className:"overflow-y-auto",placeholder:"Type your message here..."})})]})})}var g=l(29047),j=l(83337),v=l(92992),y=l(43107),w=l(33140),N=l(40884),b=l(38919),A=l(55448),C=l(68937),k=l(99837),E=l(38746),S=l(27776);function _(){let{getFirstCodeBlockContent:e,renderMessageContent:t}=(0,g.Z)(),l=(0,j.Z)(),r=(0,v.Y)(e=>e.selectedProvider),{completion:n,complete:i,isLoading:c,handleInputChange:u,input:f,setInput:p,setCompletion:m}=(0,k.GO)({api:"/api/vision",onError:e=>{let t=e.message;try{var s;let l=JSON.parse(e.message);t=null!==(s=l.message)&&void 0!==s?s:t}catch(e){}l({logo:"codegptplusbeta",title:"CodeGPT Plus Error",description:null==t?void 0:t.replaceAll('"',""),footer:[{label:"Click here for more info about models.",link:"https://docs.codegpt.co/docs/category/ai-providers"}]})}}),_=n.replaceAll("w-screen","w-full").replaceAll("h-screen","h-full"),O=e(_),F=t(_),L=!!(!c&&_),P=async e=>{if("submit"===e.type||"Enter"===e.key&&!e.shiftKey){if(e.preventDefault(),c)return;let t={prompt:e.target.value,code:O,image:""};p(""),await i(JSON.stringify(t)).catch(()=>p(t.prompt));return}if(("x"===e.key.toLowerCase()||"KeyX"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)){e.preventDefault();let t=e.target,{selectionStart:l,selectionEnd:s}=t;if(null!==l&&null!==s&&l!==s){let e=t.value.substring(l,s);(0,y.zp)(e).then(()=>{u({target:{value:f.substring(0,l)+f.substring(s)}})})}}("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,y.M1)().then(t=>{let l=e.target,{selectionStart:s,selectionEnd:r}=l;u({target:{value:f.substring(0,null!=s?s:f.length)+t+f.substring(null!=r?r:f.length)}}),l.selectionStart=0,l.selectionEnd=0})),(0,y.gT)(e)},R=async e=>{let t=e[0],l=t.name.split(".").pop();if(console.log(t),console.log(l),["png","jpg","jpeg","webp"].includes("image/"+l)){S.A.error("File type not supported",{position:"top-center"});return}try{let e=await new Promise((e,l)=>{let s=new FileReader;s.readAsDataURL(t),s.onload=()=>e(s.result),s.onerror=e=>l(e)});await i(JSON.stringify({prompt:"",image:e}))}catch(e){S.A.error("Error uploading file")}},{getRootProps:I,getInputProps:K,open:D}=(0,E.uI)({onDrop:R,multiple:!1,useFsAccessApi:!1,noClick:!0});return r?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(w.w,{className:"m-8 grid h-[95dvh] w-auto grid-cols-1 grid-rows-[auto_auto_1fr_auto]  items-center gap-4 p-4",children:[(0,s.jsxs)(N.u,{className:"flex flex-col items-center justify-center gap-3",children:[(0,s.jsx)("h1",{className:"text-5xl text-default-500",children:"React Sandbox"}),(0,s.jsxs)("p",{className:"text-smal text-default-500",children:["This ",(0,s.jsx)("span",{className:"underline",children:"experimental"})," tool allows you to build React components. You can either type a command or upload an image to interact."]})]}),(0,s.jsx)(b.j,{}),(0,s.jsx)(A.G,{className:"h-full overflow-y-auto",children:n||c?(0,s.jsx)("div",{className:"flex h-full justify-center",children:(0,s.jsx)(w.w,{fullWidth:!0,children:(0,s.jsxs)(A.G,{className:"grid h-full w-full grid-cols-[1.5fr_auto_1fr] grid-rows-1 justify-items-center gap-3 p-8",children:[(0,s.jsx)(a,{codeOutput:F}),(0,s.jsx)(b.j,{orientation:"vertical"}),(0,s.jsx)(o,{codeBlock:O})]})})}):(0,s.jsx)(w.w,{className:"m-auto w-fit",children:(0,s.jsx)("div",{...I(),children:(0,s.jsxs)(h.A,{isIconOnly:!0,variant:"bordered",onClick:D,className:"mx-auto flex h-fit w-fit flex-col items-center justify-center p-4",children:[(0,s.jsx)("input",{...K(),className:"hidden"}),(0,s.jsx)(d.Z,{color:"gray",height:128,width:128}),(0,s.jsx)("h2",{className:"-translate-y-2 text-xl text-default-500",children:"Start dropping an image"})]})})})}),(0,s.jsx)(C.i,{children:(0,s.jsx)(x,{handleSubmitC:P,handleInputChange:u,input:f,clear:()=>{m("")},isLoading:c,showStopButton:L,open:D,getRootProps:I,getInputProps:K})})]})}):null}}},function(e){e.O(0,[571,482,383,807,63,935,176,545,298,971,23,744],function(){return e(e.s=11022)}),_N_E=e.O()}]);